!function(){function e(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function n(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{hAM8:function(t,o,r){"use strict";r.r(o),r.d(o,"RegistroDatosEmailPageModule",(function(){return L}));var i=r("ofXK"),a=r("3Pt+"),s=r("TEn/"),l=r("tyNb"),u=r("mrSG"),c=r("fXoL"),b=r("Q4mC"),m=r("CmMg");function p(e,n){1&e&&(c.Mb(0,"span",14),c.Mb(1,"ion-label",15),c.uc(2,"nombre es requerido."),c.Lb(),c.Lb())}function d(e,n){1&e&&(c.Mb(0,"span",14),c.Mb(1,"ion-label",15),c.uc(2,"Apellido es requerido."),c.Lb(),c.Lb())}function g(e,n){1&e&&(c.Mb(0,"span",14),c.Mb(1,"ion-label",15),c.uc(2,"Email es requerido."),c.Lb(),c.Lb())}function f(e,n){1&e&&(c.Mb(0,"span",14),c.Mb(1,"ion-label",15),c.uc(2,"Ingrese un email v\xe1lido."),c.Lb(),c.Lb())}function h(e,n){1&e&&(c.Mb(0,"span",14),c.Mb(1,"ion-label",15),c.uc(2,"Contrase\xf1a es requerida."),c.Lb(),c.Lb())}function v(e,n){1&e&&(c.Mb(0,"span",14),c.Mb(1,"ion-label",15),c.uc(2,"Minimo 8 caracteres."),c.Lb(),c.Lb())}var M,C,y=[{path:"",component:(M=function(){function t(n,o,r,i,a,s,l,u){e(this,t),this.router=n,this.loadingController=o,this.formBuilder=r,this.navCtrl=i,this.platform=a,this.servicioAES=s,this.alertController=l,this.apiServicio=u,this.submitted=!1,this.nuevoUsuario={id:"",nombreCompleto:"",apellidos:"",telefono:"0",email:"",rutaFoto:"",fechaNacimiento:"",genero:"",password:""},this.keyJScrypto="123456$#@$^@1ERF",this.isLoading=!1}var o,r,i;return o=t,(r=[{key:"ngOnInit",value:function(){var e=this;this.subscription=this.platform.backButton.subscribeWithPriority(9999,(function(){e.dismiss(),e.navCtrl.pop()})),this.myForm=this.formBuilder.group({nombres:["",[a.n.required]],apellidos:["",[a.n.required]],email:["",[a.n.required,a.n.pattern("[a-zA-Z0-9._%+-]+@[a-z0-9.-]+.[a-z]{2,3}$")]],password:["",[a.n.required,a.n.minLength(8)]]})}},{key:"ionViewDidLeave",value:function(){this.subscription.unsubscribe()}},{key:"onSubmit",value:function(){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.submitted=!0,this.myForm.valid){e.next=2;break}return e.abrupt("return",(console.log("Llena todos los datos!"),!1));case 2:this.nuevoUsuario.nombreCompleto=this.myForm.value.nombres,this.nuevoUsuario.apellidos=this.myForm.value.apellidos,this.nuevoUsuario.email=this.myForm.value.email,this.nuevoUsuario.rutaFoto="https://firebasestorage.googleapis.com/v0/b/bubeapp.appspot.com/o/ImagenesUsuarios%2Favatar_perfil.jpg?alt=media&token=3757e499-3ff4-4f3a-ba3d-911bde3506f7",this.nuevoUsuario.password=this.servicioAES.set(this.keyJScrypto,this.myForm.value.password),this.postVerificarLoginGmail({email:this.nuevoUsuario.email});case 3:case"end":return e.stop()}}),e,this)})))}},{key:"postVerificarLoginGmail",value:function(e){var n=this;this.apiServicio.postVerificarLoginGmail(e).then((function(e){console.log(e),0==n.retornarFlag(e)?(console.log("usuario no existe"),n.irIngresarCodigo()):n.presentAlert1()})).catch((function(e){console.log(e)}))}},{key:"retornarFlag",value:function(e){var n;return e.find((function(e){n=e.ind_user})),n}},{key:"irValidacionCodigoEmail",value:function(){this.router.navigate(["codigo-email"])}},{key:"irIngresarCodigo",value:function(){var e=this;this.loadingRegistrando();var n=this.generaCodigo();this.apiServicio.enviarCorreo({email:this.nuevoUsuario.email,content:"<h4>Hola "+this.nuevoUsuario.nombreCompleto+"</h4><p>Este es el c\xf3digo que necesitas para tu registro en Bube:</p><h3 style='color:#000'>"+n+"</h3><p>Este correo electr\xf3nico se genera autom\xe1ticamente. Por favor, no respondas a \xe9l. Si necesitas ayuda adicional, por favor, visita el Soporte de Bube.</p>",subject:"C\xf3digo de verificaci\xf3n Bube"}).then((function(t){var o={state:{correo:e.nuevoUsuario.email,codigo:n,nuevoUsuario:e.nuevoUsuario}};e.dismiss(),e.router.navigate(["codigo-email"],o)})).catch((function(e){console.log(e)}))}},{key:"AlertError",value:function(e){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var t;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.alertController.create({cssClass:"my-custom-class",message:e,buttons:["OK"]});case 2:return t=n.sent,n.next=5,t.present();case 5:case"end":return n.stop()}}),n,this)})))}},{key:"generaCodigo",value:function(){for(var e="",n="0123456789".length,t=0;t<4;t++)e+="0123456789".charAt(Math.floor(Math.random()*n));return e}},{key:"loadingRegistrando",value:function(){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isLoading=!0,e.next=3,this.loadingController.create({cssClass:"my-custom-class",message:"Registrando..."}).then((function(e){e.present().then((function(){console.log("presented"),n.isLoading||e.dismiss().then((function(){return console.log("abort presenting")}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})))}},{key:"dismiss",value:function(){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isLoading=!1,e.next=3,this.loadingController.dismiss().then((function(){return console.log("dismissed")}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})))}},{key:"presentAlert1",value:function(){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.alertController.create({header:"Error",cssClass:"my-custom-class",subHeader:"el email ya est\xe1 registrado",message:"Intente con otro email",buttons:["OK"]});case 2:return n=e.sent,e.next=5,n.present();case 5:case"end":return e.stop()}}),e,this)})))}},{key:"errorControl",get:function(){return this.myForm.controls}}])&&n(o.prototype,r),i&&n(o,i),t}(),M.\u0275fac=function(e){return new(e||M)(c.Ib(l.g),c.Ib(s.ib),c.Ib(a.a),c.Ib(s.lb),c.Ib(s.mb),c.Ib(b.a),c.Ib(s.a),c.Ib(m.a))},M.\u0275cmp=c.Cb({type:M,selectors:[["app-registro-datos-email"]],decls:47,vars:7,consts:[[1,"ion-no-border"],["novalidate","",3,"formGroup","ngSubmit"],[1,"conteiner-titulo"],[1,"titulo-login",2,"font-size","30px"],[1,"contenedor"],[1,"label-input"],["lines","none",1,"input-item"],["type","text","formControlName","nombres","name","nombres","id","nombres","maxlength","30",1,"input-text"],[2,"width","100%","margin-bottom","5px"],["class","error ion-padding error-input",4,"ngIf"],["type","text","formControlName","apellidos","name","apellidos","id","apellidos","maxlength","30",1,"input-text"],["type","email","formControlName","email","name","email","id","email","maxlength","60",1,"input-text"],["type","password","formControlName","password","name","password","id","password","maxlength","30",1,"input-text"],["expand","block","type","submit",1,"btn-iniciar-sesion"],[1,"error","ion-padding","error-input"],[1,"label-error"]],template:function(e,n){1&e&&(c.Jb(0,"ion-header",0),c.Mb(1,"ion-content"),c.Mb(2,"form",1),c.Ub("ngSubmit",(function(){return n.onSubmit()})),c.Mb(3,"ion-row"),c.Mb(4,"div",2),c.Mb(5,"ion-label",3),c.uc(6,"Registra tus datos"),c.Jb(7,"br"),c.Lb(),c.Lb(),c.Lb(),c.Mb(8,"ion-row"),c.Mb(9,"div",4),c.Mb(10,"ion-row"),c.Mb(11,"ion-label",5),c.uc(12,"Nombres"),c.Lb(),c.Lb(),c.Mb(13,"ion-item",6),c.Jb(14,"ion-input",7),c.Lb(),c.Mb(15,"div",8),c.sc(16,p,3,0,"span",9),c.Lb(),c.Lb(),c.Mb(17,"div",4),c.Mb(18,"ion-row"),c.Mb(19,"ion-label",5),c.uc(20,"Apellidos"),c.Lb(),c.Lb(),c.Mb(21,"ion-item",6),c.Jb(22,"ion-input",10),c.Lb(),c.Mb(23,"div",8),c.sc(24,d,3,0,"span",9),c.Lb(),c.Lb(),c.Mb(25,"div",4),c.Mb(26,"ion-row"),c.Mb(27,"ion-label",5),c.uc(28,"Email"),c.Lb(),c.Lb(),c.Mb(29,"ion-item",6),c.Jb(30,"ion-input",11),c.Lb(),c.Mb(31,"div",8),c.sc(32,g,3,0,"span",9),c.sc(33,f,3,0,"span",9),c.Lb(),c.Lb(),c.Mb(34,"div",4),c.Mb(35,"ion-row"),c.Mb(36,"ion-label",5),c.uc(37,"Contrase\xf1a"),c.Lb(),c.Lb(),c.Mb(38,"ion-item",6),c.Jb(39,"ion-input",12),c.Lb(),c.Mb(40,"div",8),c.sc(41,h,3,0,"span",9),c.sc(42,v,3,0,"span",9),c.Lb(),c.Lb(),c.Lb(),c.Mb(43,"ion-row"),c.Mb(44,"div",4),c.Mb(45,"ion-button",13),c.uc(46,"Registrar"),c.Lb(),c.Lb(),c.Lb(),c.Lb(),c.Lb()),2&e&&(c.yb(2),c.ec("formGroup",n.myForm),c.yb(14),c.ec("ngIf",n.submitted&&(null==n.errorControl.nombres.errors?null:n.errorControl.nombres.errors.required)),c.yb(8),c.ec("ngIf",n.submitted&&(null==n.errorControl.apellidos.errors?null:n.errorControl.apellidos.errors.required)),c.yb(8),c.ec("ngIf",n.submitted&&(null==n.errorControl.email.errors?null:n.errorControl.email.errors.required)),c.yb(1),c.ec("ngIf",n.submitted&&(null==n.errorControl.email.errors?null:n.errorControl.email.errors.pattern)),c.yb(8),c.ec("ngIf",n.submitted&&(null==n.errorControl.password.errors?null:n.errorControl.password.errors.required)),c.yb(1),c.ec("ngIf",n.submitted&&(null==n.errorControl.password.errors?null:n.errorControl.password.errors.minlength)))},directives:[s.v,s.q,a.o,a.i,a.c,s.Q,s.G,s.B,s.A,s.rb,a.h,a.b,a.e,i.k,s.h],styles:["ion-content[_ngcontent-%COMP%], ion-header[_ngcontent-%COMP%], ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--background:#121212}ion-content[_ngcontent-%COMP%]   .conteiner-titulo[_ngcontent-%COMP%]{text-align:center;align-content:center;left:0;right:0;margin-top:10%;width:100%;margin-bottom:20px}ion-content[_ngcontent-%COMP%]   .conteiner-titulo[_ngcontent-%COMP%]   .titulo-login[_ngcontent-%COMP%]{color:#f3f2ed;font-family:SF-UI-Display-Black;font-size:20px;margin-top:20px}ion-content[_ngcontent-%COMP%]   .contenedor[_ngcontent-%COMP%]{align-content:center;width:100%;margin-top:15px}ion-content[_ngcontent-%COMP%]   .contenedor[_ngcontent-%COMP%]   .label-input[_ngcontent-%COMP%]{color:#515252;margin-left:12%;font-family:SFUIDisplay-Regular;font-style:Regular;font-weight:400;font-size:17px;line-height:19px;color:#f3f2ed}ion-content[_ngcontent-%COMP%]   .contenedor[_ngcontent-%COMP%]   .input-item[_ngcontent-%COMP%]{margin:5px auto;width:80%;height:50px;--background:transparent!important;border:2px solid #108b3c;box-sizing:border-box;border-radius:16px!important;--highlight-color-focused:none}ion-content[_ngcontent-%COMP%]   .contenedor[_ngcontent-%COMP%]   .input-item[_ngcontent-%COMP%]   .input-text[_ngcontent-%COMP%]{color:#8f9090;font-family:SFUIDisplay-Regular;font-style:Regular;color:#f3f2ed;font-weight:400}ion-content[_ngcontent-%COMP%]   .contenedor[_ngcontent-%COMP%]   .btn-iniciar-sesion[_ngcontent-%COMP%]{--background:#108b3c;margin:20px 10%;font-size:18px;letter-spacing:.25px;text-transform:none;height:50px;--border-radius:16px;font-family:SFCompactText-Medium;--color:#fff;color:#fff;--background-activated:#1ab952}ion-content[_ngcontent-%COMP%]   .error-input[_ngcontent-%COMP%]{margin-left:8%}ion-content[_ngcontent-%COMP%]   .error-input[_ngcontent-%COMP%]   .label-error[_ngcontent-%COMP%]{font-weight:400;font-size:14px}.label-input-error[_ngcontent-%COMP%], ion-content[_ngcontent-%COMP%]   .error-input[_ngcontent-%COMP%]   .label-error[_ngcontent-%COMP%]{font-family:SFUIDisplay-Regular;font-style:Regular;line-height:19px;color:red}.label-input-error[_ngcontent-%COMP%]{margin-left:12%;font-size:12px}"]}),M)}],L=((C=function n(){e(this,n)}).\u0275mod=c.Gb({type:C}),C.\u0275inj=c.Fb({factory:function(e){return new(e||C)},providers:[b.a],imports:[[i.c,a.d,a.m,s.gb,l.i.forChild(y)]]}),C)}}])}();