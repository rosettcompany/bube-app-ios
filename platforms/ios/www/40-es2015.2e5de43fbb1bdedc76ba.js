(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{Tn6U:function(i,o,t){"use strict";t.r(o),t.d(o,"MisdatosPageModule",(function(){return p}));var e=t("ofXK"),n=t("3Pt+"),a=t("TEn/"),s=t("tyNb"),r=t("mrSG"),l=t("fXoL"),c=t("CmMg"),u=t("e8h1"),b=t("M2bA"),d=t("/XPu");function g(i,o){if(1&i){const i=l.Nb();l.Mb(0,"ion-chip",19,12),l.Ub("click",(function(){l.mc(i);const t=o.$implicit;return l.Xb().buscarBebida(t.nombreBebida)})),l.Mb(2,"ion-label"),l.uc(3),l.Lb(),l.Lb()}if(2&i){const i=o.$implicit;l.yb(3),l.vc(i.nombremarca)}}const h=[{path:"",component:(()=>{class i{constructor(i,o,t,e,n,a,s,r){this.apiServicio=i,this.navCtrl=o,this.router=t,this.storage=e,this.firebaseAnalytics=n,this.socialSharing=a,this.loadingController=s,this.toastController=r,this.tagName=[],this.btn=!1,this.nombresBebidas=""}ionViewWillEnter(){this.tagName=[],null==this.usuario&&this.presentLoading(),this.apiServicio.getStorage("idusuario").then(i=>{this.apiServicio.getDatosUsuario(i).subscribe(i=>{this.loading.dismiss(),this.usuario=i,console.log(this.usuario);let o=document.getElementById("idnombre"),t=document.getElementById("idapellido"),e=document.getElementById("idemail"),n=document.getElementById("idcelular"),a=document.getElementById("idfecha"),s=document.getElementById("iddni");var r;r=this.usuario[0].fechanacimientousuario,console.log(r),""==this.usuario[0].fechanacimientousuario||"2099-12-31"==r.substring(0,10)?r="":(a.value=r,console.log(a.value)),n.value=0==this.usuario[0].telefonousuario?"":this.usuario[0].telefonousuario,s.value=null==this.usuario[0].dni?"":this.usuario[0].dni,o.value=this.usuario[0].nombresusuario,t.value=this.usuario[0].apellidosusuario,e.value=this.usuario[0].emailusuario},i=>{}),this.apiServicio.getBebidasFavoritas(i).subscribe(i=>{var o=i;console.log(o),o.forEach(i=>{this.tagName.push({idBebida:i.idbebida,nombreBebida:i.nombrebebida,nombre:i.nombre,idUsuario:i.idusuario,nombremarca:i.nombremarca}),console.log(this.tagName)})})})}ionViewDidEnter(){this.googleAnalytics()}irBebidas(){this.router.navigate(["validacionInicio",2]),this.tagName=[]}presentLoading(){return Object(r.a)(this,void 0,void 0,(function*(){this.loading=yield this.loadingController.create({cssClass:"my-custom-class",message:"Cargando"}),yield this.loading.present()}))}botonGuardar(){this.btn=!0,console.log(this.usuario);let i=document.getElementById("idnombre"),o=document.getElementById("idapellido"),t=document.getElementById("idemail"),e=document.getElementById("idcelular"),n=document.getElementById("idfecha"),a=document.getElementById("iddni");this.user={apellidosUsuario:o.value,codigoPais:this.usuario[0].codigopais,dni:a.value,email2Usuario:this.usuario[0].email2Usuario,emailUsuario:t.value,estadoUsuario:this.usuario[0].estadousuario,fechaNacimientoUsuario:n.value,fechaRegistro:this.usuario[0].fecharegistro,idFacebook:this.usuario[0].idfacebook,idUsuario:this.usuario[0].idusuario,nombresUsuario:i.value,rutaFotoUsuario:this.usuario[0].rutafotousuario,sexoUsuario:this.usuario[0].sexousuario,telefonoUsuario:e.value},console.log(this.user);let s=!1,r=!1,l=!1,c=!1,u=!1;0==String(i.value).length?(s=!1,this.presentToast("Ingrese su nombre","danger"),this.btn=!1):s=!0,0==String(o.value).length?(r=!1,this.presentToast("Ingrese su apellido","danger"),this.btn=!1):r=!0,0==String(e.value).length?(c=!1,this.presentToast("Ingrese su tel\xe9fono","danger"),this.btn=!1):c=!0,0==String(n.value).length?(u=!1,this.presentToast("Ingrese su Fecha de nacimiento","danger"),this.btn=!1):u=!0,8==String(a.value).length?isNaN(Number(String(a.value).substring(0,1)))||isNaN(Number(String(a.value).substring(1,2)))||isNaN(Number(String(a.value).substring(2,3)))||isNaN(Number(String(a.value).substring(3,4)))||isNaN(Number(String(a.value).substring(4,5)))||isNaN(Number(String(a.value).substring(5,6)))||isNaN(Number(String(a.value).substring(6,7)))||isNaN(Number(String(a.value).substring(7,8)))?(l=!1,this.presentToast("DNI invalido","danger"),this.btn=!1):l=!0:(l=!1,this.presentToast("Ingrese su DNI","danger"),this.btn=!1,console.log("toast")),1==s&&1==r&&1==c&&1==l&&1==u&&(console.log(this.usuario[0]),this.apiServicio.putUsuario(this.user).subscribe(i=>{this.tagName=[],this.presentToast("Sus datos se han actualizado","success"),this.btn=!1,this.ionViewWillEnter()}))}presentToast(i,o){return Object(r.a)(this,void 0,void 0,(function*(){(yield this.toastController.create({message:i,duration:2e3,color:o})).present()}))}regresar(){this.router.navigate(["./app/perfil"]),this.tagName=[]}buscarBebida(i){this.storage.get("km").then(o=>{this.router.navigate(["busquedaProducto"],{state:{bebida:i,km:o}}),this.tagName=[]}).catch(i=>{console.log("no Km")})}invitarAmigos(){this.nombresBebidas="";for(let i=0;i<this.tagName.length;i++)console.log(i),this.nombresBebidas+=i!==this.tagName.length-1?this.tagName[i].nombre+", ":this.tagName[i].nombre+".";console.log(this.nombresBebidas),this.socialSharing.shareWithOptions({message:"Hola,Te quer\xeda pasar informaci\xf3n que te ayudara mucho para que puedas sorprenderme\u{1f60c}! Mis bebidas favoritas son : "+this.nombresBebidas+". Para ver los tragos favoritos de tus contactos y vivir la experiencia Bube descarga el app en:",subject:"the subject",url:"https://web.bube.com.pe"})}googleAnalytics(){this.firebaseAnalytics.logEvent("pantallas",{pantalla:"perfil_MisDatos"}).then(i=>{console.log(i),console.log("firebase ok")}).catch(i=>{console.log(i),console.log("firebase no")})}}return i.\u0275fac=function(o){return new(o||i)(l.Ib(c.a),l.Ib(a.lb),l.Ib(s.g),l.Ib(u.b),l.Ib(b.a),l.Ib(d.a),l.Ib(a.ib),l.Ib(a.sb))},i.\u0275cmp=l.Cb({type:i,selectors:[["app-misdatos"]],decls:54,vars:2,consts:[["fill","clear","slot","start",3,"click"],["name","arrow-back-outline",2,"color","#f3f2ed"],["action","#"],["position","stacked",1,"tex-input"],["id","idnombre","type","name","placeholder","Nombres","maxlength","30"],["id","idapellido","type","name","placeholder","Apellidos","maxlength","30"],["id","iddni","type","tel","inputmode","numeric","pattern","[0-9]","placeholder","Dni","maxlength","8"],["id","idemail","type","email","placeholder","Correo electronico","maxlength","50"],["id","idcelular","type","tel","placeholder","Escribe tu n\xfamero","maxlength","9"],["id","idfecha","type","date","placeholder","Fecha de nacimiento"],["size","large","name","calendar-outline",2,"position","absolute","right","10px","color","#108b3c"],["outline","",3,"click"],["chip",""],["src","./assets/Iconos/Editar.svg","alt","editar"],["outline","",2,"background","transparent","margin-left","20px"],["name","share-social","size","large",2,"color","#fded0f","margin-right","10px",3,"click"],[1,"ion-card"],["outline","","color","success",3,"click",4,"ngFor","ngForOf"],["expand","block",1,"ion-button",3,"disabled","click"],["outline","","color","success",3,"click"]],template:function(i,o){1&i&&(l.Mb(0,"ion-header"),l.Mb(1,"ion-toolbar"),l.Mb(2,"ion-button",0),l.Ub("click",(function(){return o.regresar()})),l.Jb(3,"ion-icon",1),l.Lb(),l.Mb(4,"ion-title"),l.uc(5,"Mis datos"),l.Lb(),l.Lb(),l.Lb(),l.Mb(6,"ion-content"),l.Mb(7,"form",2),l.Mb(8,"ion-list"),l.Mb(9,"ion-row"),l.Mb(10,"ion-col"),l.Mb(11,"ion-label",3),l.uc(12,"Nombres"),l.Lb(),l.Jb(13,"ion-input",4),l.Lb(),l.Lb(),l.Mb(14,"ion-row"),l.Mb(15,"ion-col"),l.Mb(16,"ion-label",3),l.uc(17,"Apellidos"),l.Lb(),l.Jb(18,"ion-input",5),l.Lb(),l.Lb(),l.Mb(19,"ion-row"),l.Mb(20,"ion-col"),l.Mb(21,"ion-label",3),l.uc(22,"Documento de identidad (DNI)"),l.Lb(),l.Jb(23,"ion-input",6),l.Lb(),l.Lb(),l.Mb(24,"ion-row"),l.Mb(25,"ion-col"),l.Mb(26,"ion-label",3),l.uc(27,"Correo electr\xf3nico"),l.Lb(),l.Jb(28,"ion-input",7),l.Lb(),l.Lb(),l.Mb(29,"ion-row"),l.Mb(30,"ion-col"),l.Mb(31,"ion-label",3),l.uc(32,"Celular"),l.Lb(),l.Jb(33,"ion-input",8),l.Lb(),l.Lb(),l.Mb(34,"ion-row"),l.Mb(35,"ion-col"),l.Mb(36,"ion-label",3),l.uc(37,"Fecha de nacimiento"),l.Lb(),l.Mb(38,"ion-input",9),l.Jb(39,"ion-icon",10),l.Lb(),l.Lb(),l.Lb(),l.Mb(40,"ion-row"),l.Mb(41,"ion-col"),l.Mb(42,"ion-label",3),l.uc(43,"Mis favoritos "),l.Mb(44,"ion-chip",11,12),l.Ub("click",(function(){return o.irBebidas()})),l.Jb(46,"img",13),l.Lb(),l.Mb(47,"ion-chip",14),l.Mb(48,"ion-icon",15),l.Ub("click",(function(){return o.invitarAmigos()})),l.Lb(),l.Lb(),l.Lb(),l.Mb(49,"ion-card",16),l.sc(50,g,4,1,"ion-chip",17),l.Lb(),l.Lb(),l.Lb(),l.Lb(),l.Lb(),l.Lb(),l.Mb(51,"ion-footer"),l.Mb(52,"ion-button",18),l.Ub("click",(function(){return o.botonGuardar()})),l.uc(53,"Guardar"),l.Lb(),l.Lb()),2&i&&(l.yb(50),l.ec("ngForOf",o.tagName),l.yb(2),l.fc("disabled",o.btn))},directives:[a.v,a.fb,a.h,a.w,a.eb,a.q,n.o,n.i,n.j,a.H,a.Q,a.p,a.G,a.A,a.rb,a.o,a.j,e.j,a.t],styles:["ion-content[_ngcontent-%COMP%]{--background:#121212}ion-toolbar[_ngcontent-%COMP%]{--background:#108b3c}.tex-input[_ngcontent-%COMP%], ion-toolbar[_ngcontent-%COMP%]   ion-title[_ngcontent-%COMP%]{color:#fff;font-family:Gotham-Medium}.tex-input[_ngcontent-%COMP%]{font-size:18px;margin-bottom:10px}.tex-input[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]{border:none;padding:0}ion-col[_ngcontent-%COMP%]{margin-left:20px;margin-right:20px}ion-row[_ngcontent-%COMP%]{margin-top:10px}ion-list[_ngcontent-%COMP%]{background:#121212;--padding-start:30px;--padding-end:30px}ion-list[_ngcontent-%COMP%], ion-list[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{--padding-top:10px;--padding-bottom:10px}ion-list[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{height:50px;border:none;border-radius:10px;--background:#fff;--color:#333;font-size:18px;--padding-start:20px;--padding-end:20px;margin-top:3px;font-family:SFCompactText-Medium}ion-list[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-moz-placeholder{color:#333}ion-list[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-ms-input-placeholder{color:#333}ion-list[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::placeholder{color:#333}.ion-card[_ngcontent-%COMP%]{box-shadow:none!important;background-color:transparent!important;width:90%;margin:10px auto auto}.ion-card[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]{background-color:#108b3c}.ion-card[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{color:#fff}.ion-button[_ngcontent-%COMP%]{--background:#108b3c;margin:20px 30px;font-size:16px;text-transform:none;height:50px;--border-radius:16px;font-family:SFCompactText-Medium;--color:#fff;color:#fff}ion-footer[_ngcontent-%COMP%]{background:#121212}.icon-date[_ngcontent-%COMP%]{position:absolute;right:10px;color:#108b3c;width:0;height:60px;font-weight:700}"]}),i})()}];let m=(()=>{class i{}return i.\u0275mod=l.Gb({type:i}),i.\u0275inj=l.Fb({factory:function(o){return new(o||i)},imports:[[s.i.forChild(h)],s.i]}),i})(),p=(()=>{class i{}return i.\u0275mod=l.Gb({type:i}),i.\u0275inj=l.Fb({factory:function(o){return new(o||i)},imports:[[e.c,n.d,a.gb,m]]}),i})()}}]);