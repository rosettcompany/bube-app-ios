(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{yaHk:function(t,n,i){"use strict";i.r(n),i.d(n,"CodigoSmsPageModule",(function(){return M}));var o=i("ofXK"),e=i("3Pt+"),s=i("TEn/"),r=i("tyNb"),c=i("mrSG"),a=i("fXoL"),u=i("CmMg"),d=i("8BtL");const l=["input1"],g=["input2"],h=["input3"],b=["input4"],p=["input5"],f=["input6"],m=[{path:"",component:(()=>{class t{constructor(t,n,i,o,e,s,r,c,a){this.router=t,this.apiservicio=n,this.firebaseAuthentication=i,this.alertControler=o,this.route=e,this.toastController=s,this.platform=r,this.navCtrl=c,this.loadingController=a,this.usuario="",this.n=30,this.desctividarContador=!0,this.route.queryParams.subscribe(t=>{this.router.getCurrentNavigation().extras.state&&(this.usuario=this.router.getCurrentNavigation().extras.state.usuario,this.codigo=this.router.getCurrentNavigation().extras.state.codigo)})}ngOnInit(){let t=this;window.setInterval((function(){0==t.contador?t.desctividarContador=!1:(t.contador=t.n,t.n--)}),1e3),this.subscription=this.platform.backButton.subscribeWithPriority(9999,()=>{null==this.loading&&null==this.loading||this.loading.dismiss(),this.navCtrl.pop()})}verificarCodigo(){this.presentLoading(),this.codigoSms=String(this.code1)+String(this.code2)+String(this.code3)+String(this.code4)+String(this.code5)+String(this.code6),6==this.codigoSms.length&&this.firebaseAuthentication.signInWithVerificationId(this.codigo,this.codigoSms).then(t=>{console.log(t),this.loading.dismiss(),this.irValidacionFechaNacimieto()}).catch(t=>{console.log(t),this.loading.dismiss(),console.log("error"),this.presentAlert()})}irValidacionFechaNacimieto(){this.router.navigate(["validacion-fecha-nacimiento"],{state:{nuevoUsuario:this.usuario,tipoRegistro:"tel"}})}presentAlert(){return Object(c.a)(this,void 0,void 0,(function*(){const t=yield this.alertControler.create({cssClass:"my-custom-class",header:"C\xf3digo incorrecto",subHeader:"El c\xf3digo ingresado es incorrecto.",message:"Si no le lleg\xf3 el SMS con el c\xf3digo puede reenviarlo.",buttons:["OK"]});yield t.present()}))}reenviarCodigo(){this.presentLoading1(),this.enviarMensaje()}enviarMensaje(){this.borrarCodigos(),this.firebaseAuthentication.verifyPhoneNumber("+51"+this.usuario.telefono.toString(),3e4).then(t=>{this.loading.dismiss(),this.presentToastOK(),this.n=30,this.contador=30,this.desctividarContador=!0,this.codigo=t}).catch(t=>{console.log(t),this.loading.dismiss(),this.presentToastERROR()})}presentToastOK(){return Object(c.a)(this,void 0,void 0,(function*(){(yield this.toastController.create({message:"Mensaje de texto enviado.",duration:2e3,color:"success"})).present()}))}presentToastERROR(){return Object(c.a)(this,void 0,void 0,(function*(){(yield this.toastController.create({message:"Mensaje de texto no se pudo enviar.",duration:2e3,color:"danger"})).present()}))}presentLoading(){return Object(c.a)(this,void 0,void 0,(function*(){this.loading=yield this.loadingController.create({cssClass:"my-custom-class custom-loading",message:"Verificando...",translucent:!0,animated:!0}),yield this.loading.present()}))}presentLoading1(){return Object(c.a)(this,void 0,void 0,(function*(){this.loading=yield this.loadingController.create({cssClass:"my-custom-class custom-loading",message:"Enviando...",translucent:!0,animated:!0}),yield this.loading.present()}))}focusInput1(){String(this.code1).length>0?1==String(this.code1).length?this.focusInput2():setTimeout(()=>{this.input1.setFocus()},100):this.input1.setFocus()}focusInput2(){String(this.code1).length>0?1==String(this.code2).length?this.focusInput3():setTimeout(()=>{this.input2.setFocus()},100):this.input1.setFocus()}focusInput3(){String(this.code1).length>0?1==String(this.code3).length?this.focusInput4():setTimeout(()=>{this.input3.setFocus()},100):this.input1.setFocus()}focusInput4(){String(this.code1).length>0?1==String(this.code4).length?this.focusInput5():setTimeout(()=>{this.input4.setFocus()},100):this.input1.setFocus()}focusInput5(){String(this.code1).length>0?1==String(this.code5).length?this.focusInput6():setTimeout(()=>{this.input5.setFocus()},100):this.input1.setFocus()}focusInput6(){String(this.code1).length>0?1==String(this.code6).length?this.verificarCodigo():setTimeout(()=>{this.input6.setFocus()},100):this.input1.setFocus()}borrarCodigos(){this.code6="",this.code5="",this.code4="",this.code3="",this.code2="",this.code1=""}}return t.\u0275fac=function(n){return new(n||t)(a.Ib(r.g),a.Ib(u.a),a.Ib(d.a),a.Ib(s.a),a.Ib(r.a),a.Ib(s.sb),a.Ib(s.mb),a.Ib(s.lb),a.Ib(s.ib))},t.\u0275cmp=a.Cb({type:t,selectors:[["app-codigo-sms"]],viewQuery:function(t,n){var i;1&t&&(a.zc(l,!0),a.zc(g,!0),a.zc(h,!0),a.zc(b,!0),a.zc(p,!0),a.zc(f,!0)),2&t&&(a.jc(i=a.Vb())&&(n.input1=i.first),a.jc(i=a.Vb())&&(n.input2=i.first),a.jc(i=a.Vb())&&(n.input3=i.first),a.jc(i=a.Vb())&&(n.input4=i.first),a.jc(i=a.Vb())&&(n.input5=i.first),a.jc(i=a.Vb())&&(n.input6=i.first))},decls:42,vars:10,consts:[[1,"ion-no-border"],["slot","start"],["color","success"],["src","./assets/Iconos/LogoBube_final.png",1,"img-login"],[2,"width","100%","text-align","center","padding-top","15%"],[1,"label-page"],[2,"width","100%","text-align","center"],["lines","none",1,"input-login"],["type","tel","inputmode","numeric","pattern","[0-9]","maxlength","1",1,"input-text",3,"ngModel","ngModelChange","ionChange"],["input1",""],["input2",""],["input3",""],["input4",""],["input5",""],["input6",""],[2,"width","90%","text-align","right","padding-top","3%"],[1,"button-back-letter",3,"click"],["slot","icon-only","name","backspace-outline"],[2,"width","100%","text-align","center","padding-top","3%"],[1,"label-page2"],[2,"color","#b8b7b7","text-decoration","underline",3,"hidden","click"],[3,"hidden"]],template:function(t,n){1&t&&(a.Mb(0,"ion-header",0),a.Mb(1,"ion-toolbar"),a.Mb(2,"ion-buttons",1),a.Jb(3,"ion-menu-button"),a.Jb(4,"ion-back-button",2),a.Lb(),a.Lb(),a.Lb(),a.Mb(5,"ion-content"),a.Mb(6,"ion-row"),a.Jb(7,"ion-img",3),a.Lb(),a.Mb(8,"ion-row"),a.Mb(9,"div",4),a.Mb(10,"ion-label"),a.Mb(11,"h2",5),a.Mb(12,"b"),a.uc(13),a.Lb(),a.Lb(),a.Lb(),a.Lb(),a.Lb(),a.Mb(14,"ion-row"),a.Mb(15,"div",6),a.Mb(16,"ion-item",7),a.Mb(17,"ion-input",8,9),a.Ub("ngModelChange",(function(t){return n.code1=t}))("ionChange",(function(){return n.focusInput1()})),a.Lb(),a.Mb(19,"ion-input",8,10),a.Ub("ngModelChange",(function(t){return n.code2=t}))("ionChange",(function(){return n.focusInput2()})),a.Lb(),a.Mb(21,"ion-input",8,11),a.Ub("ngModelChange",(function(t){return n.code3=t}))("ionChange",(function(){return n.focusInput3()})),a.Lb(),a.Mb(23,"ion-input",8,12),a.Ub("ngModelChange",(function(t){return n.code4=t}))("ionChange",(function(){return n.focusInput4()})),a.Lb(),a.Mb(25,"ion-input",8,13),a.Ub("ngModelChange",(function(t){return n.code5=t}))("ionChange",(function(){return n.focusInput5()})),a.Lb(),a.Mb(27,"ion-input",8,14),a.Ub("ngModelChange",(function(t){return n.code6=t}))("ionChange",(function(){return n.focusInput6()})),a.Lb(),a.Lb(),a.Lb(),a.Lb(),a.Mb(29,"ion-row"),a.Mb(30,"div",15),a.Mb(31,"ion-button",16),a.Ub("click",(function(){return n.borrarCodigos()})),a.Jb(32,"ion-icon",17),a.Lb(),a.Lb(),a.Lb(),a.Mb(33,"ion-row"),a.Mb(34,"div",18),a.Mb(35,"ion-label"),a.Mb(36,"h3",19),a.uc(37,"Te hemos enviado un c\xf3digo de seguridad. Si no encuentras el mensaje de texto haz clic en "),a.Mb(38,"ion-label",20),a.Ub("click",(function(){return n.reenviarCodigo()})),a.uc(39,"volver a enviar"),a.Lb(),a.Mb(40,"ion-label",21),a.uc(41),a.Lb(),a.Lb(),a.Lb(),a.Lb(),a.Lb(),a.Lb()),2&t&&(a.yb(13),a.wc("Ingresa el c\xf3digo que te hemos enviado a tu celular ",n.usuario.telefono,""),a.yb(4),a.ec("ngModel",n.code1),a.yb(2),a.ec("ngModel",n.code2),a.yb(2),a.ec("ngModel",n.code3),a.yb(2),a.ec("ngModel",n.code4),a.yb(2),a.ec("ngModel",n.code5),a.yb(2),a.ec("ngModel",n.code6),a.yb(11),a.ec("hidden",n.desctividarContador),a.yb(2),a.ec("hidden",!n.desctividarContador),a.yb(1),a.wc("Volver a enviar en: ",n.contador,""))},directives:[s.v,s.fb,s.i,s.I,s.e,s.f,s.q,s.Q,s.x,s.G,s.B,s.A,s.rb,e.l,e.e,e.h,e.k,s.h,s.w],styles:["ion-content[_ngcontent-%COMP%], ion-header[_ngcontent-%COMP%], ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--background:#121212}ion-content[_ngcontent-%COMP%]   .label-page[_ngcontent-%COMP%]{color:#fff;padding-left:10%;padding-right:10%;font-family:SFUIDisplay-Regular;font-style:normal;font-weight:500;font-size:18px;line-height:21px}ion-content[_ngcontent-%COMP%]   .btn-iniciar-sesion[_ngcontent-%COMP%]{--background:#108b3c;margin:20px 30px;font-size:18px;letter-spacing:.25px;text-transform:none;height:50px;--border-radius:16px;font-family:SFCompactText-Medium;--color:#fff;color:#fff;--background-activated:#1ab952}.custom-loading[_ngcontent-%COMP%]{--spinner-color:#108b3c!important}.img-login[_ngcontent-%COMP%]{margin:15% auto auto;width:120px;height:120px}.input-login[_ngcontent-%COMP%]{margin:10px auto 5px;width:86%;height:50px;--background:transparent!important;box-sizing:border-box;border-radius:8px!important;--highlight-color-focused:none}.input-login[_ngcontent-%COMP%]   .input-text[_ngcontent-%COMP%]{color:#fff;font-family:SFUIDisplay-Regular;font-style:Regular;font-size:18px;font-weight:700;margin-left:10px;margin-right:10px;text-align:center;border-bottom:1px solid #108b3c}.button-back-letter[_ngcontent-%COMP%]{--background:transparent!important;--background-activated:transparent!important;--box-shadow:none}.label-page2[_ngcontent-%COMP%]{color:#fff;padding-left:10%;padding-right:10%;font-family:SFUIDisplay-Regular;font-style:normal;font-weight:500;font-size:16px;line-height:19px}"]}),t})()}];let M=(()=>{class t{}return t.\u0275mod=a.Gb({type:t}),t.\u0275inj=a.Fb({factory:function(n){return new(n||t)},imports:[[o.c,e.d,s.gb,r.i.forChild(m)]]}),t})()}}]);