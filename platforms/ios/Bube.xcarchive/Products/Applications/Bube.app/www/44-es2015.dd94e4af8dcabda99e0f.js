(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{vjaW:function(n,e,t){"use strict";t.r(e),t.d(e,"RegistroDatosPageModule",(function(){return d}));var o=t("ofXK"),i=t("3Pt+"),r=t("TEn/"),s=t("tyNb"),a=t("mrSG"),l=t("fXoL"),c=t("8BtL"),b=t("Q4mC"),u=t("CmMg");const h=[{path:"",component:(()=>{class n{constructor(n,e,t,o,i,r,s,a){this.router=n,this.firebaseAuthentication=e,this.alertControler=t,this.platform=o,this.navCtrl=i,this.servicioAES=r,this.loadingController=s,this.apiServicio=a,this.nombres="",this.apellidos="",this.celular="",this.contrasenia="",this.activar_boton=!0,this.error_nombres=!0,this.error_apellidos=!0,this.error_celular=!0,this.error_contra=!0,this.vClave=!1,this.vCelular=!1,this.nuevoUsuario={id:"",nombreCompleto:"",apellidos:"",telefono:"",email:"",rutaFoto:"",fechaNacimiento:"",genero:"",password:""},this.keyJScrypto="123456$#@$^@1ERF"}ngOnInit(){}ionViewDidEnter(){this.subscription=this.platform.backButton.subscribeWithPriority(9999,()=>{null==this.loading&&null==this.loading||this.loading.dismiss(),this.navCtrl.pop()})}ionViewDidLeave(){this.subscription.unsubscribe()}verificarCelular(){9==this.celular.length?(this.vCelular=!0,this.error_celular=!0):(this.vCelular=!1,this.error_celular=!1),this.verificarInputs()}verificarContrasenia(){this.contrasenia.length>=8?(this.vClave=!0,this.error_contra=!0):(this.vClave=!1,this.error_contra=!1),this.verificarInputs()}verificarInputs(){this.activar_boton=""==this.nombres||""==this.apellidos||1!=this.vCelular||1!=this.vClave}enviarCodigo(){return Object(a.a)(this,void 0,void 0,(function*(){this.nuevoUsuario.nombreCompleto=this.nombres,this.nuevoUsuario.apellidos=this.apellidos,this.nuevoUsuario.telefono=this.celular,this.nuevoUsuario.rutaFoto="https://firebasestorage.googleapis.com/v0/b/bubeapp.appspot.com/o/ImagenesUsuarios%2Favatar_perfil.jpg?alt=media&token=3757e499-3ff4-4f3a-ba3d-911bde3506f7",this.nuevoUsuario.password=this.servicioAES.set(this.keyJScrypto,this.contrasenia);let n={state:{usuario:this.nuevoUsuario,codigo:this.codigo}};this.subscription2.unsubscribe(),this.router.navigate(["codigo-sms"],n)}))}postVerificarLoginTelefono(){this.subscription2=this.platform.backButton.subscribeWithPriority(9999,()=>{}),this.presentLoading(),this.apiServicio.postVerificarLoginTelefono({telefono:this.celular}).then(n=>{console.log(n),this.loading.dismiss(),0==this.retornarFlag(n)?(console.log("usuario no existe"),this.enviarMensaje()):(this.presentAlert1(),this.subscription2.unsubscribe())}).catch(n=>{console.log(n),this.loading.dismiss(),this.presentAlert(),this.subscription2.unsubscribe()})}retornarFlag(n){let e,t=[];return t=n,t.find(n=>{e=n.ind_user}),e}enviarMensaje(){this.firebaseAuthentication.verifyPhoneNumber("+51"+this.celular.toString(),3e4).then(n=>{this.codigo=n,this.loading.dismiss(),this.enviarCodigo()}).catch(n=>{console.log(n),this.loading.dismiss(),this.presentAlert(),this.subscription2.unsubscribe()})}presentLoading(){return Object(a.a)(this,void 0,void 0,(function*(){this.loading=yield this.loadingController.create({cssClass:"my-custom-class",message:"Cargando...",translucent:!0,animated:!0}),yield this.loading.present()}))}presentAlert(){return Object(a.a)(this,void 0,void 0,(function*(){const n=yield this.alertControler.create({cssClass:"my-custom-class",header:"Error",subHeader:"Error en el registro.",message:"Ha ocurrido un error registrando int\xe9ntelo de nuevo.",buttons:["OK"]});yield n.present()}))}presentAlert1(){return Object(a.a)(this,void 0,void 0,(function*(){const n=yield this.alertControler.create({header:"Error",cssClass:"my-custom-class",subHeader:"el tel\xe9fono ya est\xe1 registrado",message:"Intente con otro tel\xe9fono",buttons:["OK"]});yield n.present()}))}}return n.\u0275fac=function(e){return new(e||n)(l.Ib(s.g),l.Ib(c.a),l.Ib(r.a),l.Ib(r.mb),l.Ib(r.lb),l.Ib(b.a),l.Ib(r.ib),l.Ib(u.a))},n.\u0275cmp=l.Cb({type:n,selectors:[["app-registro-datos"]],decls:49,vars:9,consts:[[1,"ion-no-border"],["action","#"],[1,"conteiner-titulo"],[1,"titulo-login",2,"font-size","30px"],[1,"contenedor"],[1,"label-input"],["lines","none",1,"input-item"],["type","text","name","nombres","maxlength","30",1,"input-text",3,"ngModel","ngModelChange","ionChange"],[1,"label-input-error",3,"hidden"],["name","alert-circle-outline"],["type","text","name","apellidos","maxlength","30",1,"input-text",3,"ngModel","ngModelChange","ionChange"],["oninput","this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\\..*?)\\..*/g, '$1');","type","tel","name","telefono","maxlength","9",1,"input-text",3,"ngModel","ngModelChange","ionChange"],["type","password","name","password",1,"input-text",3,"ngModel","ngModelChange","ionChange"],["expand","block",1,"btn-iniciar-sesion",3,"disabled","click"]],template:function(n,e){1&n&&(l.Jb(0,"ion-header",0),l.Mb(1,"ion-content"),l.Mb(2,"form",1),l.Mb(3,"ion-row"),l.Mb(4,"div",2),l.Mb(5,"ion-label",3),l.uc(6,"Registra tus datos"),l.Jb(7,"br"),l.Lb(),l.Lb(),l.Lb(),l.Mb(8,"ion-row"),l.Mb(9,"div",4),l.Mb(10,"ion-row"),l.Mb(11,"ion-label",5),l.uc(12,"Nombres"),l.Lb(),l.Lb(),l.Mb(13,"ion-item",6),l.Mb(14,"ion-input",7),l.Ub("ngModelChange",(function(n){return e.nombres=n}))("ionChange",(function(){return e.verificarInputs()})),l.Lb(),l.Lb(),l.Mb(15,"ion-label",8),l.Jb(16,"ion-icon",9),l.uc(17,"Campo requerido"),l.Lb(),l.Lb(),l.Mb(18,"div",4),l.Mb(19,"ion-row"),l.Mb(20,"ion-label",5),l.uc(21,"Apellidos"),l.Lb(),l.Lb(),l.Mb(22,"ion-item",6),l.Mb(23,"ion-input",10),l.Ub("ngModelChange",(function(n){return e.apellidos=n}))("ionChange",(function(){return e.verificarInputs()})),l.Lb(),l.Lb(),l.Mb(24,"ion-label",8),l.Jb(25,"ion-icon",9),l.uc(26,"Campo requerido"),l.Lb(),l.Lb(),l.Mb(27,"div",4),l.Mb(28,"ion-row"),l.Mb(29,"ion-label",5),l.uc(30,"Celular"),l.Lb(),l.Lb(),l.Mb(31,"ion-item",6),l.Mb(32,"ion-input",11),l.Ub("ngModelChange",(function(n){return e.celular=n}))("ionChange",(function(){return e.verificarCelular()})),l.Lb(),l.Lb(),l.Mb(33,"ion-label",8),l.Jb(34,"ion-icon",9),l.uc(35,"M\xednimo 9 d\xedgitos (Solo n\xfameros)"),l.Lb(),l.Lb(),l.Mb(36,"div",4),l.Mb(37,"ion-row"),l.Mb(38,"ion-label",5),l.uc(39,"Contrase\xf1a"),l.Lb(),l.Lb(),l.Mb(40,"ion-item",6),l.Mb(41,"ion-input",12),l.Ub("ngModelChange",(function(n){return e.contrasenia=n}))("ionChange",(function(){return e.verificarContrasenia()})),l.Lb(),l.Lb(),l.Mb(42,"ion-label",8),l.Jb(43,"ion-icon",9),l.uc(44,"M\xednimo 8 caracteres."),l.Lb(),l.Lb(),l.Lb(),l.Mb(45,"ion-row"),l.Mb(46,"div",4),l.Mb(47,"ion-button",13),l.Ub("click",(function(){return e.postVerificarLoginTelefono()})),l.uc(48,"Registrar"),l.Lb(),l.Lb(),l.Lb(),l.Lb(),l.Lb()),2&n&&(l.yb(14),l.ec("ngModel",e.nombres),l.yb(1),l.ec("hidden",e.error_nombres),l.yb(8),l.ec("ngModel",e.apellidos),l.yb(1),l.ec("hidden",e.error_apellidos),l.yb(8),l.ec("ngModel",e.celular),l.yb(1),l.ec("hidden",e.error_celular),l.yb(8),l.ec("ngModel",e.contrasenia),l.yb(1),l.ec("hidden",e.error_contra),l.yb(5),l.ec("disabled",e.activar_boton))},directives:[r.v,r.q,i.o,i.i,i.j,r.Q,r.G,r.B,r.A,r.rb,i.e,i.h,i.k,r.w,r.h],styles:["ion-content[_ngcontent-%COMP%], ion-header[_ngcontent-%COMP%], ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--background:#121212}ion-content[_ngcontent-%COMP%]   .conteiner-titulo[_ngcontent-%COMP%]{text-align:center;align-content:center;left:0;right:0;margin-top:10%;width:100%;margin-bottom:20px}ion-content[_ngcontent-%COMP%]   .conteiner-titulo[_ngcontent-%COMP%]   .titulo-login[_ngcontent-%COMP%]{color:#f3f2ed;font-family:SF-UI-Display-Black;font-size:20px;margin-top:20px}ion-content[_ngcontent-%COMP%]   .contenedor[_ngcontent-%COMP%]{align-content:center;width:100%;margin-top:15px}ion-content[_ngcontent-%COMP%]   .contenedor[_ngcontent-%COMP%]   .label-input[_ngcontent-%COMP%]{color:#515252;margin-left:12%;font-family:SFUIDisplay-Regular;font-style:Regular;font-weight:400;font-size:17px;line-height:19px;color:#f3f2ed}ion-content[_ngcontent-%COMP%]   .contenedor[_ngcontent-%COMP%]   .input-item[_ngcontent-%COMP%]{margin:5px auto;width:80%;height:50px;--background:transparent!important;border:2px solid #108b3c;box-sizing:border-box;border-radius:16px!important;--highlight-color-focused:none}ion-content[_ngcontent-%COMP%]   .contenedor[_ngcontent-%COMP%]   .input-item[_ngcontent-%COMP%]   .input-text[_ngcontent-%COMP%]{color:#8f9090;font-family:SFUIDisplay-Regular;font-style:Regular;color:#f3f2ed;font-weight:400}ion-content[_ngcontent-%COMP%]   .contenedor[_ngcontent-%COMP%]   .btn-iniciar-sesion[_ngcontent-%COMP%]{--background:#108b3c;margin:20px 10%;font-size:18px;letter-spacing:.25px;text-transform:none;height:50px;--border-radius:16px;font-family:SFCompactText-Medium;--color:#fff;color:#fff;--background-activated:#1ab952}.label-input-error[_ngcontent-%COMP%]{color:red;margin-left:12%;font-family:SFUIDisplay-Regular;font-style:Regular;font-size:12px;line-height:19px}"]}),n})()}];let d=(()=>{class n{}return n.\u0275mod=l.Gb({type:n}),n.\u0275inj=l.Fb({factory:function(e){return new(e||n)},providers:[b.a],imports:[[o.c,i.d,r.gb,s.i.forChild(h)]]}),n})()}}]);