(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{"/wOe":function(o,e,t){"use strict";t.r(e),t.d(e,"LoginTelefonoPageModule",(function(){return h}));var n=t("ofXK"),r=t("tyNb"),i=t("TEn/"),s=t("mrSG"),a=t("3Pt+"),l=t("fXoL"),c=t("Q4mC"),u=t("CmMg");function b(o,e){1&o&&(l.Mb(0,"span",12),l.Mb(1,"ion-label",13),l.uc(2,"Telefono es requerido (Solo n\xfameros)."),l.Lb(),l.Lb())}function g(o,e){1&o&&(l.Mb(0,"span",12),l.Mb(1,"ion-label",13),l.uc(2,"M\xednimo 9 d\xedgitos(Solo n\xfameros)."),l.Lb(),l.Lb())}function d(o,e){1&o&&(l.Mb(0,"span",12),l.Mb(1,"ion-label",13),l.uc(2,"Ingrese un n\xfamero v\xe1lido (Solo n\xfameros)."),l.Lb(),l.Lb())}function p(o,e){1&o&&(l.Mb(0,"span",12),l.Mb(1,"ion-label",13),l.uc(2,"Contrase\xf1a es requerida."),l.Lb(),l.Lb())}function m(o,e){1&o&&(l.Mb(0,"span",12),l.Mb(1,"ion-label",13),l.uc(2,"M\xednimo 8 caracteres."),l.Lb(),l.Lb())}const f=[{path:"",component:(()=>{class o{constructor(o,e,t,n,r,i,s,l){this.router=o,this.loadingController=e,this.formBuilder=t,this.platform=n,this.navCtrl=r,this.servicioAES=i,this.alertController=s,this.apiService=l,this.submitted=!1,this.telefono="999999999",this.password="grover",this.Usuario={nombreCompleto:"",apellidos:"",telefono:"",email:"",rutaFoto:"",fechaNacimiento:"",genero:"",password:""},this.keyJScrypto="123456$#@$^@1ERF",this.myForm=this.formBuilder.group({telefono:["",[a.n.required,a.n.max(999999999),a.n.min(111111111)]],password:["",[a.n.required,a.n.minLength(8)]]})}ngOnInit(){}ionViewDidEnter(){this.subscription=this.platform.backButton.subscribeWithPriority(9999,()=>{null==this.loading&&null==this.loading||this.loading.dismiss(),this.navCtrl.pop()})}ionViewDidLeave(){this.subscription.unsubscribe()}get errorControl(){return this.myForm.controls}onSubmit(){return Object(s.a)(this,void 0,void 0,(function*(){if(this.submitted=!0,!this.myForm.valid)return console.log("Llena todos los datos!"),!1;{console.log(this.myForm.value),this.Usuario.telefono=this.myForm.value.telefono;let o={telefono:this.myForm.value.telefono,password:this.servicioAES.set(this.keyJScrypto,this.myForm.value.password)};this.postLoginTelefono(o)}}))}postLoginTelefono(o){this.presentLoading(),this.apiService.postLoginTelefono(o).then(o=>{console.log(o),this.logearse(o)}).catch(o=>{console.log(o),this.loading.dismiss(),this.presentAlert2()})}logearse(o){this.loading.dismiss();let e={state:{nuevoUsuario:this.Usuario,tipoRegistro:"tel"}};var t=this.retornarFlag(o);console.log("ind logearse "+t),0==t?(console.log("Pass incorrecta"),this.presentAlertErrorPass()):(this.guardarIdUser(o),3==t?(console.log("usuario nuevo"),this.router.navigate(["./validacionInicio",1],e)):4==t?(console.log("usuario nuevo"),this.router.navigate(["./validacionCorreo"],e)):2==t?(console.log("usuario antiguo"),this.router.navigate(["./app/inicio"],e)):5==t&&(console.log("usuario no existe"),this.presentAlert()))}guardarIdUser(o){let e=this.telefono,t=this.retornarid(o),n=this.retornarFlag(o);this.apiService.setStorage("idusuario",t),this.apiService.setStorage("ind_user",n),this.apiService.setStorage("telefono",e),this.apiService.setStorage("usuario",this.Usuario),this.apiService.setStorage("tipoRegistro","tel")}retornarFlag(o){let e,t=[];return t=o,t.find(o=>{e=o.ind_user}),e}retornarid(o){let e,t=[];return t=o,t.find(o=>{e=o.idusuario}),e}irRegistroDatos(){this.router.navigate(["registro-datos"])}presentLoading(){return Object(s.a)(this,void 0,void 0,(function*(){this.loading=yield this.loadingController.create({cssClass:"my-custom-class",message:"Iniciando sesi\xf3n"}),yield this.loading.present()}))}presentAlert(){return Object(s.a)(this,void 0,void 0,(function*(){const o=yield this.alertController.create({cssClass:"my-custom-class",header:"Error",subHeader:"Usuario no existe",message:"Debe crear un nuevo usuario",buttons:["OK"]});yield o.present()}))}presentAlertErrorPass(){return Object(s.a)(this,void 0,void 0,(function*(){const o=yield this.alertController.create({cssClass:"my-custom-class",header:"Error",subHeader:"Contrase\xf1a incorrecta",message:"Intente nuevamente",buttons:["OK"]});yield o.present()}))}presentAlert2(){return Object(s.a)(this,void 0,void 0,(function*(){const o=yield this.alertController.create({cssClass:"my-custom-class",header:"Error",subHeader:"Se ha producido un error",message:"Error en el servidor de bube",buttons:["OK"]});yield o.present()}))}}return o.\u0275fac=function(e){return new(e||o)(l.Ib(r.g),l.Ib(i.ib),l.Ib(a.a),l.Ib(i.mb),l.Ib(i.lb),l.Ib(c.a),l.Ib(i.a),l.Ib(u.a))},o.\u0275cmp=l.Cb({type:o,selectors:[["app-login-telefono"]],decls:36,vars:6,consts:[["novalidate","",3,"formGroup","ngSubmit"],[1,"conteiner-titulo"],[1,"titulo-login",2,"font-size","30px"],[1,"contenedor"],[1,"label-input"],["lines","none",1,"input-item"],["oninput","this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\\..*?)\\..*/g, '$1');","formControlName","telefono","maxlength","9","type","tel",1,"input-text"],[2,"width","100%","margin-bottom","5px"],["class","error ion-padding error-input",4,"ngIf"],["formControlName","password","type","password",1,"input-text"],[1,"info-paragraph",3,"click"],["type","submit","expand","block",1,"btn-iniciar-sesion"],[1,"error","ion-padding","error-input"],[1,"label-error"]],template:function(o,e){1&o&&(l.Jb(0,"ion-header"),l.Mb(1,"ion-content"),l.Mb(2,"form",0),l.Ub("ngSubmit",(function(){return e.onSubmit()})),l.Mb(3,"ion-row"),l.Mb(4,"div",1),l.Mb(5,"ion-label",2),l.uc(6,"N\xfamero de tel\xe9fono"),l.Jb(7,"br"),l.Lb(),l.Lb(),l.Lb(),l.Mb(8,"ion-row"),l.Mb(9,"div",3),l.Mb(10,"ion-row"),l.Mb(11,"ion-label",4),l.uc(12,"N\xfamero de tel\xe9fono"),l.Lb(),l.Lb(),l.Mb(13,"ion-item",5),l.Jb(14,"ion-input",6),l.Lb(),l.Mb(15,"div",7),l.sc(16,b,3,0,"span",8),l.sc(17,g,3,0,"span",8),l.sc(18,d,3,0,"span",8),l.Lb(),l.Lb(),l.Mb(19,"div",3),l.Mb(20,"ion-row"),l.Mb(21,"ion-label",4),l.uc(22,"Contrase\xf1a"),l.Lb(),l.Lb(),l.Mb(23,"ion-item",5),l.Jb(24,"ion-input",9),l.Lb(),l.Mb(25,"div",7),l.sc(26,p,3,0,"span",8),l.sc(27,m,3,0,"span",8),l.Lb(),l.Lb(),l.Lb(),l.Mb(28,"ion-row"),l.Mb(29,"ion-col"),l.Mb(30,"ion-label",10),l.Ub("click",(function(){return e.irRegistroDatos()})),l.uc(31,"Registrate"),l.Lb(),l.Lb(),l.Lb(),l.Mb(32,"ion-row"),l.Mb(33,"div",3),l.Mb(34,"ion-button",11),l.uc(35,"Iniciar sesi\xf3n"),l.Lb(),l.Lb(),l.Lb(),l.Lb(),l.Lb()),2&o&&(l.yb(2),l.ec("formGroup",e.myForm),l.yb(14),l.ec("ngIf",e.submitted&&(null==e.errorControl.telefono.errors?null:e.errorControl.telefono.errors.required)),l.yb(1),l.ec("ngIf",e.submitted&&(null==e.errorControl.telefono.errors?null:e.errorControl.telefono.errors.min)),l.yb(1),l.ec("ngIf",e.submitted&&(null==e.errorControl.telefono.errors?null:e.errorControl.telefono.errors.max)),l.yb(8),l.ec("ngIf",e.submitted&&(null==e.errorControl.password.errors?null:e.errorControl.password.errors.required)),l.yb(1),l.ec("ngIf",e.submitted&&(null==e.errorControl.password.errors?null:e.errorControl.password.errors.minlength)))},directives:[i.v,i.q,a.o,a.i,a.c,i.Q,i.G,i.B,i.A,i.rb,a.h,a.b,a.e,n.k,i.p,i.h],styles:["ion-content[_ngcontent-%COMP%]{--background:#121212}ion-content[_ngcontent-%COMP%]   .conteiner-titulo[_ngcontent-%COMP%]{text-align:center;align-content:center;left:0;right:0;margin-top:40%;width:100%;margin-bottom:20px}ion-content[_ngcontent-%COMP%]   .conteiner-titulo[_ngcontent-%COMP%]   .titulo-login[_ngcontent-%COMP%]{color:#f3f2ed;font-family:SF-UI-Display-Black;font-size:20px;margin-top:20px}ion-content[_ngcontent-%COMP%]   .contenedor[_ngcontent-%COMP%]{align-content:center;width:100%}ion-content[_ngcontent-%COMP%]   .contenedor[_ngcontent-%COMP%]   .label-input[_ngcontent-%COMP%]{color:#515252;margin-left:10%;font-family:SFUIDisplay-Regular;font-style:Regular;font-weight:400;font-size:18px;line-height:19px;color:#f3f2ed}ion-content[_ngcontent-%COMP%]   .contenedor[_ngcontent-%COMP%]   .input-item[_ngcontent-%COMP%]{margin:5px auto;width:86%;height:50px;--background:transparent!important;border:2px solid #108b3c;box-sizing:border-box;border-radius:16px!important;--highlight-color-focused:none}ion-content[_ngcontent-%COMP%]   .contenedor[_ngcontent-%COMP%]   .input-item[_ngcontent-%COMP%]   .input-text[_ngcontent-%COMP%]{color:#8f9090;font-family:SFUIDisplay-Regular;font-style:Regular;color:#f3f2ed;font-weight:400}ion-content[_ngcontent-%COMP%]   .contenedor[_ngcontent-%COMP%]   .btn-iniciar-sesion[_ngcontent-%COMP%]{--background:#108b3c;margin:20px 30px;font-size:18px;letter-spacing:.25px;text-transform:none;height:50px;--border-radius:16px;font-family:SFCompactText-Medium;--color:#fff;color:#fff;--background-activated:#1ab952}ion-content[_ngcontent-%COMP%]   .info-paragraph[_ngcontent-%COMP%]{margin-bottom:var(--page-margin);color:#b8b7b7;text-align:left;margin-left:30px;text-decoration:underline;font-family:SFCompactText-Medium;font-size:14px}ion-content[_ngcontent-%COMP%]   .info-paragraph[_ngcontent-%COMP%]:last-child{margin-bottom:0}ion-content[_ngcontent-%COMP%]   .error-input[_ngcontent-%COMP%]{margin-left:8%}ion-content[_ngcontent-%COMP%]   .error-input[_ngcontent-%COMP%]   .label-error[_ngcontent-%COMP%]{font-family:SFUIDisplay-Regular;font-style:Regular;font-weight:400;font-size:14px;line-height:19px;color:red}"]}),o})()}];let h=(()=>{class o{}return o.\u0275mod=l.Gb({type:o}),o.\u0275inj=l.Fb({factory:function(e){return new(e||o)},providers:[c.a],imports:[[n.c,a.d,a.m,i.gb,r.i.forChild(f)]]}),o})()}}]);