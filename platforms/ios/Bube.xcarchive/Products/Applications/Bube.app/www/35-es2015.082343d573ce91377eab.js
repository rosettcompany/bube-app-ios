(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{b1kR:function(t,o,n){"use strict";n.r(o),n.d(o,"LoginEmailPageModule",(function(){return f}));var e=n("ofXK"),r=n("3Pt+"),i=n("tyNb"),s=n("TEn/"),a=n("mrSG"),l=n("fXoL"),c=n("UbJi"),u=n("Q4mC"),b=n("CmMg");function g(t,o){1&t&&(l.Mb(0,"span",12),l.Mb(1,"ion-label",13),l.uc(2,"Email es requerido."),l.Lb(),l.Lb())}function d(t,o){1&t&&(l.Mb(0,"span",12),l.Mb(1,"ion-label",13),l.uc(2,"Ingrese un email v\xe1lido."),l.Lb(),l.Lb())}function p(t,o){1&t&&(l.Mb(0,"span",12),l.Mb(1,"ion-label",13),l.uc(2,"Contrase\xf1a es requerida."),l.Lb(),l.Lb())}function m(t,o){1&t&&(l.Mb(0,"span",12),l.Mb(1,"ion-label",13),l.uc(2,"Minimo 8 caracteres."),l.Lb(),l.Lb())}const h=[{path:"",component:(()=>{class t{constructor(t,o,n,e,r,i,s,a,l){this.afAuth=t,this.router=o,this.loadingController=n,this.formBuilder=e,this.platform=r,this.servicioAES=i,this.navCtrl=s,this.alertController=a,this.apiService=l,this.submitted=!1,this.email="ben10_va@hotmail.com",this.password="grover",this.Usuario={nombreCompleto:"",apellidos:"",telefono:"",email:"",rutaFoto:"",fechaNacimiento:"",genero:"",password:""},this.keyJScrypto="123456$#@$^@1ERF"}ngOnInit(){this.myForm=this.formBuilder.group({email:["",[r.n.required,r.n.pattern("[a-zA-Z0-9._%+-]+@[a-z0-9.-]+.[a-z]{2,3}$")]],password:["",[r.n.required,r.n.minLength(8)]]})}ionViewDidEnter(){this.subscription=this.platform.backButton.subscribeWithPriority(9999,()=>{null==this.loading&&null==this.loading||this.loading.dismiss(),this.navCtrl.pop()})}ionViewDidLeave(){this.subscription.unsubscribe()}get errorControl(){return this.myForm.controls}onSubmit(){return Object(a.a)(this,void 0,void 0,(function*(){if(this.submitted=!0,!this.myForm.valid)return console.log("Llena todos los datos!"),!1;{console.log(this.myForm.value),this.Usuario.email=this.myForm.value.email;let t={email:this.myForm.value.email,password:this.servicioAES.set(this.keyJScrypto,this.myForm.value.password)};this.postLoginEmail(t)}}))}irRegistroDatosEmail(){this.router.navigate(["registro-datos-email"])}postLoginEmail(t){this.presentLoading(),this.apiService.postLoginEmail(t).then(t=>{console.log(t),this.logearse(t)}).catch(t=>{console.log(t),this.loading.dismiss(),this.presentAlert2(t)})}logearse(t){this.loading.dismiss();let o={state:{nuevoUsuario:this.Usuario,tipoRegistro:"email"}};var n=this.retornarFlag(t);console.log("ind logearse "+n),0==n?(console.log("pass incorrecta"),this.presentAlertErrorPass()):(this.guardarIdUser(t),3==n?(console.log("usuario nuevo"),this.router.navigate(["./validacionInicio",1],o)):4==n?(console.log("usuario nuevo"),this.router.navigate(["./validacionCorreo"],o)):2==n?(console.log("usuario antiguo"),this.router.navigate(["./app/inicio"],o)):5==n&&(console.log("usuario no existe"),this.presentAlert()))}guardarIdUser(t){let o=this.email,n=this.retornarid(t),e=this.retornarFlag(t);this.apiService.setStorage("idusuario",n),this.apiService.setStorage("ind_user",e),this.apiService.setStorage("correo",o),this.apiService.setStorage("usuario",this.Usuario),this.apiService.setStorage("tipoRegistro","email")}retornarFlag(t){let o,n=[];return n=t,n.find(t=>{o=t.ind_user}),o}retornarid(t){let o,n=[];return n=t,n.find(t=>{o=t.idusuario}),o}presentLoading(){return Object(a.a)(this,void 0,void 0,(function*(){this.loading=yield this.loadingController.create({cssClass:"my-custom-class",message:"Iniciando sesi\xf3n"}),yield this.loading.present()}))}presentAlert(){return Object(a.a)(this,void 0,void 0,(function*(){const t=yield this.alertController.create({cssClass:"my-custom-class",header:"Error",subHeader:"Usuario no existe",message:"Debe crear un nuevo usuario",buttons:["OK"]});yield t.present()}))}presentAlertErrorPass(){return Object(a.a)(this,void 0,void 0,(function*(){const t=yield this.alertController.create({cssClass:"my-custom-class",header:"Error",subHeader:"Contrase\xf1a incorrecta",message:"Intente nuevamente",buttons:["OK"]});yield t.present()}))}presentAlert2(t){return Object(a.a)(this,void 0,void 0,(function*(){const o=yield this.alertController.create({cssClass:"my-custom-class",header:"Error",subHeader:"Se ha producido un error",message:t,buttons:["OK"]});yield o.present()}))}}return t.\u0275fac=function(o){return new(o||t)(l.Ib(c.a),l.Ib(i.g),l.Ib(s.ib),l.Ib(r.a),l.Ib(s.mb),l.Ib(u.a),l.Ib(s.lb),l.Ib(s.a),l.Ib(b.a))},t.\u0275cmp=l.Cb({type:t,selectors:[["app-login-email"]],decls:35,vars:5,consts:[["novalidate","",3,"formGroup","ngSubmit"],[1,"conteiner-titulo"],[1,"titulo-login",2,"font-size","30px"],[1,"contenedor"],[1,"label-input"],["lines","none",1,"input-item"],["formControlName","email","type","email",1,"input-text"],[2,"width","100%","margin-bottom","5px"],["class","error ion-padding error-input",4,"ngIf"],["formControlName","password","type","password",1,"input-text"],[1,"info-paragraph",3,"click"],["type","submit","expand","block",1,"btn-iniciar-sesion"],[1,"error","ion-padding","error-input"],[1,"label-error"]],template:function(t,o){1&t&&(l.Jb(0,"ion-header"),l.Mb(1,"ion-content"),l.Mb(2,"form",0),l.Ub("ngSubmit",(function(){return o.onSubmit()})),l.Mb(3,"ion-row"),l.Mb(4,"div",1),l.Mb(5,"ion-label",2),l.uc(6,"Correo electr\xf3nico"),l.Jb(7,"br"),l.Lb(),l.Lb(),l.Lb(),l.Mb(8,"ion-row"),l.Mb(9,"div",3),l.Mb(10,"ion-row"),l.Mb(11,"ion-label",4),l.uc(12,"Correo electr\xf3nico"),l.Lb(),l.Lb(),l.Mb(13,"ion-item",5),l.Jb(14,"ion-input",6),l.Lb(),l.Mb(15,"div",7),l.sc(16,g,3,0,"span",8),l.sc(17,d,3,0,"span",8),l.Lb(),l.Lb(),l.Mb(18,"div",3),l.Mb(19,"ion-row"),l.Mb(20,"ion-label",4),l.uc(21,"Contrase\xf1a"),l.Lb(),l.Lb(),l.Mb(22,"ion-item",5),l.Jb(23,"ion-input",9),l.Lb(),l.Mb(24,"div",7),l.sc(25,p,3,0,"span",8),l.sc(26,m,3,0,"span",8),l.Lb(),l.Lb(),l.Lb(),l.Mb(27,"ion-row"),l.Mb(28,"ion-col"),l.Mb(29,"ion-label",10),l.Ub("click",(function(){return o.irRegistroDatosEmail()})),l.uc(30,"Registrate"),l.Lb(),l.Lb(),l.Lb(),l.Mb(31,"ion-row"),l.Mb(32,"div",3),l.Mb(33,"ion-button",11),l.uc(34,"Iniciar sesi\xf3n"),l.Lb(),l.Lb(),l.Lb(),l.Lb(),l.Lb()),2&t&&(l.yb(2),l.ec("formGroup",o.myForm),l.yb(14),l.ec("ngIf",o.submitted&&(null==o.errorControl.email.errors?null:o.errorControl.email.errors.required)),l.yb(1),l.ec("ngIf",o.submitted&&(null==o.errorControl.email.errors?null:o.errorControl.email.errors.pattern)),l.yb(8),l.ec("ngIf",o.submitted&&(null==o.errorControl.password.errors?null:o.errorControl.password.errors.required)),l.yb(1),l.ec("ngIf",o.submitted&&(null==o.errorControl.password.errors?null:o.errorControl.password.errors.minlength)))},directives:[s.v,s.q,r.o,r.i,r.c,s.Q,s.G,s.B,s.A,s.rb,r.h,r.b,e.k,s.p,s.h],styles:["ion-content[_ngcontent-%COMP%]{--background:#121212}ion-content[_ngcontent-%COMP%]   .conteiner-titulo[_ngcontent-%COMP%]{text-align:center;align-content:center;left:0;right:0;margin-top:40%;width:100%;margin-bottom:20px}ion-content[_ngcontent-%COMP%]   .conteiner-titulo[_ngcontent-%COMP%]   .titulo-login[_ngcontent-%COMP%]{color:#f3f2ed;font-family:SF-UI-Display-Black;font-size:20px;margin-top:20px}ion-content[_ngcontent-%COMP%]   .contenedor[_ngcontent-%COMP%]{align-content:center;width:100%}ion-content[_ngcontent-%COMP%]   .contenedor[_ngcontent-%COMP%]   .label-input[_ngcontent-%COMP%]{color:#515252;margin-left:10%;font-family:SFUIDisplay-Regular;font-style:Regular;font-weight:400;font-size:18px;line-height:19px;color:#f3f2ed}ion-content[_ngcontent-%COMP%]   .contenedor[_ngcontent-%COMP%]   .input-item[_ngcontent-%COMP%]{margin:5px auto;width:86%;height:50px;--background:transparent!important;border:2px solid #108b3c;box-sizing:border-box;border-radius:16px!important;--highlight-color-focused:none}ion-content[_ngcontent-%COMP%]   .contenedor[_ngcontent-%COMP%]   .input-item[_ngcontent-%COMP%]   .input-text[_ngcontent-%COMP%]{color:#8f9090;font-family:SFUIDisplay-Regular;font-style:Regular;color:#f3f2ed;font-weight:400}ion-content[_ngcontent-%COMP%]   .contenedor[_ngcontent-%COMP%]   .btn-iniciar-sesion[_ngcontent-%COMP%]{--background:#108b3c;margin:20px 30px;font-size:18px;letter-spacing:.25px;text-transform:none;height:50px;--border-radius:16px;font-family:SFCompactText-Medium;--color:#fff;color:#fff;--background-activated:#1ab952}ion-content[_ngcontent-%COMP%]   .info-paragraph[_ngcontent-%COMP%]{margin-bottom:var(--page-margin);color:#b8b7b7;text-align:left;margin-left:30px;text-decoration:underline;font-family:SFCompactText-Medium;font-size:14px}ion-content[_ngcontent-%COMP%]   .info-paragraph[_ngcontent-%COMP%]:last-child{margin-bottom:0}ion-content[_ngcontent-%COMP%]   .error-input[_ngcontent-%COMP%]{margin-left:8%}ion-content[_ngcontent-%COMP%]   .error-input[_ngcontent-%COMP%]   .label-error[_ngcontent-%COMP%]{font-family:SFUIDisplay-Regular;font-style:Regular;font-weight:400;font-size:14px;line-height:19px;color:red}"]}),t})()}];let f=(()=>{class t{}return t.\u0275mod=l.Gb({type:t}),t.\u0275inj=l.Fb({factory:function(o){return new(o||t)},providers:[u.a],imports:[[e.c,r.d,r.m,s.gb,i.i.forChild(h)]]}),t})()}}]);