!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{CiRT:function(n,i,o){"use strict";o.r(i),o.d(i,"ValidacionFechaNacimientoPageModule",(function(){return m}));var r,a,s=o("ofXK"),c=o("3Pt+"),u=o("TEn/"),l=o("mrSG"),d=o("wd/R"),g=o("fXoL"),h=o("tyNb"),p=o("CmMg"),f=[{path:"",component:(r=function(){function n(t,i,o,r,a){var s=this;e(this,n),this.route=t,this.router=i,this.loadingController=o,this.apiService=r,this.alertController=a,this.botonContinuar=!0,this.options={buttons:[{text:"Cancelar",role:"cancel"},{text:"Ok",role:"Done",handler:function(e){console.log(e),s.fechaNacimiento=String(e.month.text)+"-"+String(e.day.text)+"-"+String(e.year.text),s.nuevoUsuario.fechaNacimiento=s.convert(s.fechaNacimiento),console.log(s.convert(s.fechaNacimiento)),s.validarFechaNacimiento()}}]},this.route.queryParams.subscribe((function(e){s.router.getCurrentNavigation().extras.state&&(s.nuevoUsuario=s.router.getCurrentNavigation().extras.state.nuevoUsuario,s.tipoRegistro=s.router.getCurrentNavigation().extras.state.tipoRegistro,s.amigo=s.router.getCurrentNavigation().extras.state.amigo,s.validarFechaNacimiento())}))}var i,o,r;return i=n,(o=[{key:"ngOnInit",value:function(){}},{key:"validarFechaNacimiento",value:function(){null==this.nuevoUsuario.fechaNacimiento||null==this.nuevoUsuario.fechaNacimiento||""==this.nuevoUsuario.fechaNacimiento?(this.botonContinuar=!0,this.fechaNacimiento=this.nuevoUsuario.fechaNacimiento):this.botonContinuar=!1}},{key:"validarMayorEdad",value:function(){var e=new Date,t=Date.parse(this.fechaNacimiento+" 00:00:00"),n=new Date(t);return!(e.getFullYear()-n.getFullYear()<18)}},{key:"irValidacionBebidas",value:function(){if(this.validarMayorEdad()){this.presentLoading(),console.log(this.nuevoUsuario);var e={id:this.nuevoUsuario.id,email:this.nuevoUsuario.email,first_name:this.nuevoUsuario.nombreCompleto,picture:{data:{url:this.nuevoUsuario.rutaFoto}},last_name:this.nuevoUsuario.apellidos,gender:this.nuevoUsuario.genero,birthday:this.nuevoUsuario.fechaNacimiento,password:this.nuevoUsuario.password,telefono:this.nuevoUsuario.telefono,viene_de:this.tipoRegistro,idapple:this.nuevoUsuario.idapple};console.log(e),this.validarTipoRegistro(e)}else this.presentAlert1()}},{key:"validarTipoRegistro",value:function(e){"email"==this.tipoRegistro||"tel"==this.tipoRegistro?this.insertaUser(e):"fb"==this.tipoRegistro?this.insertaUserFB(e):"apple"==this.tipoRegistro?this.insertaUserApple(e):console.log("ERROR EN TIPO DE REGISTRO")}},{key:"insertaUser",value:function(e){var t=this;this.apiService.postRegistrarLoginGmail(e).then((function(e){console.log("retorno api "+JSON.stringify(e)),t.guardarIdUser(e),t.irValidacionInicio()})).catch((function(e){t.loading.dismiss(),t.presentAlert3(e)}))}},{key:"insertaUserApple",value:function(e){var t=this;this.apiService.postRegistrarLoginApple(e).then((function(e){console.log("retorno api "+JSON.stringify(e)),t.guardarIdUser(e),t.irValidacionInicio()})).catch((function(e){t.loading.dismiss(),t.presentAlert3(e)}))}},{key:"insertaUserFB",value:function(e){var t=this;this.apiService.guardarUsuario(e).then((function(e){t.guardarIdUser(e),t.insertarAmigos(e)})).catch((function(e){t.loading.dismiss(),t.presentAlert3(e)}))}},{key:"insertarAmigos",value:function(e){var t=this,n=this.retornarid(e),i={idusuario:n,listaamigos:JSON.stringify(this.amigo.data)};this.apiService.guardarAmigos({idusuario:n,listaamigos:i.listaamigos}).then((function(e){console.log("inserto amigos "+JSON.stringify(e)),t.irValidacionInicio()})).catch((function(e){console.log("error insertar amigo "+e),t.loading.dismiss(),t.presentAlert4()}))}},{key:"irValidacionInicio",value:function(){this.loading.dismiss(),this.router.navigate(["./validacionInicio",1],{state:{nuevoUsuario:this.nuevoUsuario,tipoRegistro:this.tipoRegistro}})}},{key:"guardarIdUser",value:function(e){var t=this.nuevoUsuario.email,n=this.retornarid(e),i=this.retornarFlag(e);this.apiService.setStorage("idusuario",n),this.apiService.setStorage("ind_user",i),this.apiService.setStorage("correo",t),this.apiService.setStorage("usuario",this.nuevoUsuario),this.apiService.setStorage("tipoRegistro",this.tipoRegistro)}},{key:"retornarFlag",value:function(e){var t;return e.find((function(e){t=e.ind_user})),t}},{key:"retornarid",value:function(e){var t;return e.find((function(e){t=e.idusuario})),t}},{key:"convert",value:function(e){return d(e).format("DD/MM/YYYY")}},{key:"presentLoading",value:function(){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadingController.create({cssClass:"my-custom-class",message:"Iniciando sesi\xf3n"});case 2:return this.loading=e.sent,e.next=5,this.loading.present();case 5:case"end":return e.stop()}}),e,this)})))}},{key:"presentAlert1",value:function(){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.alertController.create({header:"Menor de edad",cssClass:"my-custom-class",message:"Debes ser mayor de edad (18+)",buttons:["OK"]});case 2:return t=e.sent,e.next=5,t.present();case 5:case"end":return e.stop()}}),e,this)})))}},{key:"presentAlert3",value:function(e){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.alertController.create({header:"Error",subHeader:"Error al registrar usuario",message:e,buttons:["OK"]});case 2:return n=t.sent,t.next=5,n.present();case 5:case"end":return t.stop()}}),t,this)})))}},{key:"presentAlert4",value:function(){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.alertController.create({header:"Error",subHeader:"Error al insertar amigos",message:"Intente m\xe1s tarde",buttons:["OK"]});case 2:return t=e.sent,e.next=5,t.present();case 5:case"end":return e.stop()}}),e,this)})))}}])&&t(i.prototype,o),r&&t(i,r),n}(),r.\u0275fac=function(e){return new(e||r)(g.Ib(h.a),g.Ib(h.g),g.Ib(u.ib),g.Ib(p.a),g.Ib(u.a))},r.\u0275cmp=g.Cb({type:r,selectors:[["app-validacion-fecha-nacimiento"]],decls:18,vars:3,consts:[[1,"conteiner-titulo"],[1,"titulo-login"],[1,"container-date"],["lines","none"],["placeholder","Seleccione",1,"date-time",3,"ngModel","pickerOptions","ngModelChange"],[1,"contenedor"],[1,"btn-inicio-sesion",3,"disabled","click"],[1,"contenedor-edad"],[1,"text-edad"]],template:function(e,t){1&e&&(g.Jb(0,"ion-header"),g.Mb(1,"ion-content"),g.Mb(2,"ion-row"),g.Mb(3,"div",0),g.Mb(4,"ion-label",1),g.uc(5,"Ingresa tu fecha de cumplea\xf1os"),g.Jb(6,"br"),g.Lb(),g.Lb(),g.Lb(),g.Mb(7,"ion-row"),g.Mb(8,"div",2),g.Mb(9,"ion-item",3),g.Mb(10,"ion-datetime",4),g.Ub("ngModelChange",(function(e){return t.fechaNacimiento=e})),g.Lb(),g.Lb(),g.Lb(),g.Lb(),g.Mb(11,"ion-row"),g.Mb(12,"div",5),g.Mb(13,"ion-button",6),g.Ub("click",(function(){return t.irValidacionBebidas()})),g.uc(14,"Continuar"),g.Lb(),g.Lb(),g.Mb(15,"div",7),g.Mb(16,"ion-label",8),g.uc(17,"Debe ser 18+"),g.Lb(),g.Lb(),g.Lb(),g.Lb()),2&e&&(g.yb(10),g.ec("ngModel",t.fechaNacimiento)("pickerOptions",t.options),g.yb(3),g.ec("disabled",t.botonContinuar))},directives:[u.v,u.q,u.Q,u.G,u.B,u.r,u.qb,c.h,c.k,u.h],styles:["ion-content[_ngcontent-%COMP%]{--background:#121212}ion-content[_ngcontent-%COMP%]   .conteiner-titulo[_ngcontent-%COMP%]{text-align:center;align-content:center;left:0;right:0;margin-top:40%;width:100%;margin-bottom:20px}ion-content[_ngcontent-%COMP%]   .conteiner-titulo[_ngcontent-%COMP%]   .titulo-login[_ngcontent-%COMP%]{color:#f3f2ed;font-family:SF-UI-Display-Black;font-size:20px;margin-top:20px}ion-content[_ngcontent-%COMP%]   .container-date[_ngcontent-%COMP%]{width:100%;text-align:center;justify-content:center}ion-content[_ngcontent-%COMP%]   .container-date[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{margin:auto;--border-color:#108b3c;--background:#121212!important;--border-width:1px 0px 1px 0px;width:45%}ion-content[_ngcontent-%COMP%]   .date-time[_ngcontent-%COMP%]{margin:auto}ion-content[_ngcontent-%COMP%]   .date-time[_ngcontent-%COMP%]::part(placeholder), ion-content[_ngcontent-%COMP%]   .date-time[_ngcontent-%COMP%]::part(text){color:#f3f2ed!important;font-family:SF-UI-Display-Black!important}ion-content[_ngcontent-%COMP%]   .date-time[_ngcontent-%COMP%]::part(placeholder){text-align:center}ion-content[_ngcontent-%COMP%]   .contenedor[_ngcontent-%COMP%]{margin-top:100px;align-content:center;text-align:center;width:100%}ion-content[_ngcontent-%COMP%]   .contenedor[_ngcontent-%COMP%]   .btn-inicio-sesion[_ngcontent-%COMP%]{--background:#121212;margin-left:30px;margin-right:30px;margin-bottom:20px;font-size:16px;height:50px;width:200px;text-transform:none;--border-color:#108b3c;--border-style:solid;--border-width:2px;font-family:SFUIDisplay-Regular;--border-radius:25px;letter-spacing:.25px;--background-activated:#383838}ion-content[_ngcontent-%COMP%]   .contenedor-edad[_ngcontent-%COMP%]{align-content:center;text-align:center;width:100%}ion-content[_ngcontent-%COMP%]   .contenedor-edad[_ngcontent-%COMP%]   .text-edad[_ngcontent-%COMP%]{color:#f3f2ed!important;font-family:SFUIDisplay-Regular;letter-spacing:.25px}"]}),r)}],m=((a=function t(){e(this,t)}).\u0275mod=g.Gb({type:a}),a.\u0275inj=g.Fb({factory:function(e){return new(e||a)},imports:[[s.c,c.d,u.gb,h.i.forChild(f)]]}),a)}}])}();