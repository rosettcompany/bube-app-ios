!function(){function n(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function e(n,e){for(var o=0;o<e.length;o++){var t=e[o];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{"9FqO":function(o,t,i){"use strict";i.r(t),i.d(t,"LoginEligeSesionPageModule",(function(){return C}));var r=i("ofXK"),a=i("3Pt+"),c=i("TEn/"),s=i("tyNb"),l=i("mrSG"),u=i("fXoL"),g=i("UbJi"),b=i("up+p"),d=i("GGTb"),f=i("CmMg");function p(n,e){1&n&&u.Jb(0,"ion-spinner",9)}var h,v,m=[{path:"",component:(h=function(){function o(e,t,i,r,a,c,s,l,u){n(this,o),this.router=e,this.afAuth=t,this.googlePlus=i,this.platform=r,this.navCtrl=a,this.facebook=c,this.apiService=s,this.loadingController=l,this.alertController=u,this.Usuario={id:"",nombreCompleto:"",apellidos:"",telefono:"0",email:"",rutaFoto:"",fechaNacimiento:"",genero:"",password:"",idapple:""},this.btnGoogle=!1,this.botonGoogle=!1}var t,i,r;return t=o,(i=[{key:"ngOnInit",value:function(){}},{key:"ionViewDidEnter",value:function(){var n=this;this.subscription=this.platform.backButton.subscribeWithPriority(9999,(function(){n.navCtrl.pop()}))}},{key:"ionViewDidLeave",value:function(){this.subscription.unsubscribe()}},{key:"irInicioCorreo",value:function(){this.router.navigate(["login-email"])}},{key:"irInicioTelefono",value:function(){this.router.navigate(["login-telefono"])}},{key:"cargarLoginGoogle",value:function(){this.botonGoogle=!0,this.eventoLogin()}},{key:"eventoLogin",value:function(){var n=this;this.apiService.getStorage("gmail_activo").then((function(e){null!=e&&1==e?n.googlePlus.logout().then((function(e){n.apiService.setStorage("gmail_activo",0),n.loginGooglePlus()})).catch((function(e){console.log(e),n.apiService.setStorage("gmail_activo",0),n.loginGooglePlus()})):n.loginGooglePlus()})).catch((function(e){console.log(e),n.loginGooglePlus()}))}},{key:"loginGooglePlus",value:function(){var n=this;this.googlePlus.login({}).then((function(e){n.apiService.setStorage("gmail_activo",1),n.Usuario.nombreCompleto=null==e.givenName?"":e.givenName,n.Usuario.apellidos=null==e.familyName?"":e.familyName,n.Usuario.email=null==e.email?"":e.email,n.Usuario.rutaFoto=null==e.imageUrl?"https://firebasestorage.googleapis.com/v0/b/bubeapp.appspot.com/o/ImagenesUsuarios%2Favatar_perfil.jpg?alt=media&token=3757e499-3ff4-4f3a-ba3d-911bde3506f7":e.imageUrl;var o={email:n.Usuario.email};""==n.Usuario.email?n.botonGoogle=!1:n.postVerificarLoginGmail(o)})).catch((function(e){console.log(e),n.botonGoogle=!1,n.presentAlert2()}))}},{key:"logout",value:function(){this.afAuth.signOut()}},{key:"postVerificarLoginGmail",value:function(n){var e=this;this.apiService.postVerificarLoginGmail(n).then((function(n){e.botonGoogle=!1,e.logearse(n,"email")})).catch((function(n){console.log(n),e.botonGoogle=!1,e.presentAlert1()}))}},{key:"logearse",value:function(n,e){var o=this.retornarFlag(n);console.log("ind logearse "+o);var t={state:{nuevoUsuario:this.Usuario,tipoRegistro:e}};0==o?(console.log("usuario no existe"),this.router.navigate(["validacion-fecha-nacimiento"],t)):(this.guardarIdUser(n,e),3==o?(console.log("usuario nuevo"),this.router.navigate(["./validacionInicio",1],t)):4==o?(console.log("usuario nuevo"),this.router.navigate(["./validacionCorreo"],t)):2==o&&(console.log("usuario antiguo"),this.router.navigate(["./app/inicio"],t)))}},{key:"guardarIdUser",value:function(n,e){var o=this.Usuario.email,t=this.retornarid(n),i=this.retornarFlag(n);this.apiService.setStorage("idusuario",t),this.apiService.setStorage("ind_user",i),this.apiService.setStorage("correo",o),this.apiService.setStorage("usuario",this.Usuario),this.apiService.setStorage("tipoRegistro",e)}},{key:"retornarFlag",value:function(n){var e;return n.find((function(n){e=n.ind_user})),e}},{key:"retornarid",value:function(n){var e;return n.find((function(n){e=n.idusuario})),e}},{key:"presentLoading",value:function(){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.loadingController.create({cssClass:"my-custom-class",message:"Iniciando sesi\xf3n"});case 2:return this.loading=n.sent,n.next=5,this.loading.present();case 5:case"end":return n.stop()}}),n,this)})))}},{key:"presentLoading2",value:function(){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.loadingController.create({cssClass:"my-custom-class",message:"Verificando..."});case 2:return this.loading=n.sent,n.next=5,this.loading.present();case 5:case"end":return n.stop()}}),n,this)})))}},{key:"presentAlert1",value:function(){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var e;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.alertController.create({header:"Error",cssClass:"my-custom-class",subHeader:"Error al obtener datos",message:"Intente m\xe1s tarde",buttons:["OK"]});case 2:return e=n.sent,n.next=5,e.present();case 5:case"end":return n.stop()}}),n,this)})))}},{key:"presentAlert2",value:function(){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var e;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.alertController.create({header:"Alerta",cssClass:"my-custom-class",subHeader:"Acci\xf3n cancelada",buttons:["OK"]});case 2:return e=n.sent,n.next=5,e.present();case 5:case"end":return n.stop()}}),n,this)})))}},{key:"logoutFacebook",value:function(){this.facebook.logout()}}])&&e(t.prototype,i),r&&e(t,r),o}(),h.\u0275fac=function(n){return new(n||h)(u.Ib(s.g),u.Ib(g.a),u.Ib(b.a),u.Ib(c.mb),u.Ib(c.lb),u.Ib(d.a),u.Ib(f.a),u.Ib(c.ib),u.Ib(c.a))},h.\u0275cmp=u.Cb({type:h,selectors:[["app-login-elige-sesion"]],decls:22,vars:4,consts:[[1,"conteiner-titulo"],[1,"titulo-login",2,"font-size","30px"],[1,"titulo-login"],[1,"contenedor"],["expand","block",1,"btn-inicio-sesion",3,"disabled","click"],["expand","block",1,"btn-inicio-google",3,"disabled","click"],["slot","start","name","logo-google"],[1,"text-google"],["name","crescent",4,"ngIf"],["name","crescent"]],template:function(n,e){1&n&&(u.Jb(0,"ion-header"),u.Mb(1,"ion-content"),u.Mb(2,"ion-row"),u.Mb(3,"div",0),u.Mb(4,"ion-label",1),u.uc(5,"Elige"),u.Jb(6,"br"),u.Lb(),u.Mb(7,"ion-label",2),u.uc(8,"tu inicio de sesi\xf3n"),u.Lb(),u.Lb(),u.Lb(),u.Mb(9,"ion-row"),u.Mb(10,"div",3),u.Mb(11,"ion-button",4),u.Ub("click",(function(){return e.irInicioTelefono()})),u.uc(12,"Iniciar sesi\xf3n con n\xfamero de tel\xe9fono"),u.Lb(),u.Lb(),u.Mb(13,"div",3),u.Mb(14,"ion-button",4),u.Ub("click",(function(){return e.irInicioCorreo()})),u.uc(15,"Iniciar sesi\xf3n con correo electr\xf3nico"),u.Lb(),u.Lb(),u.Mb(16,"div",3),u.Mb(17,"ion-button",5),u.Ub("click",(function(){return e.cargarLoginGoogle()})),u.Jb(18,"ion-icon",6),u.Mb(19,"ion-label",7),u.uc(20," Iniciar sesi\xf3n con Google "),u.Lb(),u.sc(21,p,1,0,"ion-spinner",8),u.Lb(),u.Lb(),u.Lb(),u.Lb()),2&n&&(u.yb(11),u.ec("disabled",e.botonGoogle),u.yb(3),u.ec("disabled",e.botonGoogle),u.yb(3),u.ec("disabled",e.botonGoogle),u.yb(4),u.ec("ngIf",e.botonGoogle))},directives:[c.v,c.q,c.Q,c.G,c.h,c.w,r.k,c.Z],styles:["ion-content[_ngcontent-%COMP%]{--background:#121212}ion-content[_ngcontent-%COMP%]   .conteiner-titulo[_ngcontent-%COMP%]{text-align:center;align-content:center;left:0;right:0;margin-top:40%;width:100%;margin-bottom:20px}ion-content[_ngcontent-%COMP%]   .conteiner-titulo[_ngcontent-%COMP%]   .titulo-login[_ngcontent-%COMP%]{color:#f3f2ed;font-family:SF-UI-Display-Black;font-size:20px;margin-top:20px}ion-content[_ngcontent-%COMP%]   .contenedor[_ngcontent-%COMP%]{align-content:center;text-align:center;width:100%}ion-content[_ngcontent-%COMP%]   .contenedor[_ngcontent-%COMP%]   .btn-inicio-sesion[_ngcontent-%COMP%]{--background:#121212;font-size:16px;--border-color:#108b3c;font-family:SFUIDisplay-Regular;--background-activated:#383838}ion-content[_ngcontent-%COMP%]   .contenedor[_ngcontent-%COMP%]   .btn-inicio-google[_ngcontent-%COMP%], ion-content[_ngcontent-%COMP%]   .contenedor[_ngcontent-%COMP%]   .btn-inicio-sesion[_ngcontent-%COMP%]{margin-left:30px;margin-right:30px;margin-bottom:20px;height:50px;text-transform:none;--border-style:solid;--border-width:2px;--border-radius:16px}ion-content[_ngcontent-%COMP%]   .contenedor[_ngcontent-%COMP%]   .btn-inicio-google[_ngcontent-%COMP%]{--background:#d54c3e;--border-color:#d54c3e;--background-activated:#383838}ion-content[_ngcontent-%COMP%]   .contenedor[_ngcontent-%COMP%]   .btn-inicio-google[_ngcontent-%COMP%]   .text-google[_ngcontent-%COMP%]{font-family:SFUIDisplay-Regular;color:#f3f2ed;font-size:16px}ion-content[_ngcontent-%COMP%]   .contenedor[_ngcontent-%COMP%]   .btn-inicio-apple[_ngcontent-%COMP%]{--background:#fff;margin-left:30px;margin-right:30px;margin-bottom:20px;height:50px;text-transform:none;--border-color:#fff;--border-style:solid;--border-width:2px;--border-radius:16px;--background-activated:#383838}ion-content[_ngcontent-%COMP%]   .contenedor[_ngcontent-%COMP%]   .btn-inicio-apple[_ngcontent-%COMP%]   .text-google[_ngcontent-%COMP%]{font-family:SFUIDisplay-Regular;color:#000;font-size:16px}"]}),h)}],C=((v=function e(){n(this,e)}).\u0275mod=u.Gb({type:v}),v.\u0275inj=u.Fb({factory:function(n){return new(n||v)},imports:[[r.c,a.d,c.gb,s.i.forChild(m)]]}),v)}}])}();