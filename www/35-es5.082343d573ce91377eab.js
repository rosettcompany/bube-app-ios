!function(){function e(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function n(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{b1kR:function(t,o,r){"use strict";r.r(o),r.d(o,"LoginEmailPageModule",(function(){return y}));var i=r("ofXK"),a=r("3Pt+"),s=r("tyNb"),c=r("TEn/"),l=r("mrSG"),u=r("fXoL"),b=r("UbJi"),g=r("Q4mC"),p=r("CmMg");function m(e,n){1&e&&(u.Mb(0,"span",12),u.Mb(1,"ion-label",13),u.uc(2,"Email es requerido."),u.Lb(),u.Lb())}function d(e,n){1&e&&(u.Mb(0,"span",12),u.Mb(1,"ion-label",13),u.uc(2,"Ingrese un email v\xe1lido."),u.Lb(),u.Lb())}function f(e,n){1&e&&(u.Mb(0,"span",12),u.Mb(1,"ion-label",13),u.uc(2,"Contrase\xf1a es requerida."),u.Lb(),u.Lb())}function h(e,n){1&e&&(u.Mb(0,"span",12),u.Mb(1,"ion-label",13),u.uc(2,"Minimo 8 caracteres."),u.Lb(),u.Lb())}var v,C,M=[{path:"",component:(v=function(){function t(n,o,r,i,a,s,c,l,u){e(this,t),this.afAuth=n,this.router=o,this.loadingController=r,this.formBuilder=i,this.platform=a,this.servicioAES=s,this.navCtrl=c,this.alertController=l,this.apiService=u,this.submitted=!1,this.email="ben10_va@hotmail.com",this.password="grover",this.Usuario={nombreCompleto:"",apellidos:"",telefono:"",email:"",rutaFoto:"",fechaNacimiento:"",genero:"",password:""},this.keyJScrypto="123456$#@$^@1ERF"}var o,r,i;return o=t,(r=[{key:"ngOnInit",value:function(){this.myForm=this.formBuilder.group({email:["",[a.n.required,a.n.pattern("[a-zA-Z0-9._%+-]+@[a-z0-9.-]+.[a-z]{2,3}$")]],password:["",[a.n.required,a.n.minLength(8)]]})}},{key:"ionViewDidEnter",value:function(){var e=this;this.subscription=this.platform.backButton.subscribeWithPriority(9999,(function(){null==e.loading&&null==e.loading||e.loading.dismiss(),e.navCtrl.pop()}))}},{key:"ionViewDidLeave",value:function(){this.subscription.unsubscribe()}},{key:"onSubmit",value:function(){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.submitted=!0,this.myForm.valid){e.next=2;break}return e.abrupt("return",(console.log("Llena todos los datos!"),!1));case 2:console.log(this.myForm.value),this.Usuario.email=this.myForm.value.email,n={email:this.myForm.value.email,password:this.servicioAES.set(this.keyJScrypto,this.myForm.value.password)},this.postLoginEmail(n);case 5:case"end":return e.stop()}}),e,this)})))}},{key:"irRegistroDatosEmail",value:function(){this.router.navigate(["registro-datos-email"])}},{key:"postLoginEmail",value:function(e){var n=this;this.presentLoading(),this.apiService.postLoginEmail(e).then((function(e){console.log(e),n.logearse(e)})).catch((function(e){console.log(e),n.loading.dismiss(),n.presentAlert2(e)}))}},{key:"logearse",value:function(e){this.loading.dismiss();var n={state:{nuevoUsuario:this.Usuario,tipoRegistro:"email"}},t=this.retornarFlag(e);console.log("ind logearse "+t),0==t?(console.log("pass incorrecta"),this.presentAlertErrorPass()):(this.guardarIdUser(e),3==t?(console.log("usuario nuevo"),this.router.navigate(["./validacionInicio",1],n)):4==t?(console.log("usuario nuevo"),this.router.navigate(["./validacionCorreo"],n)):2==t?(console.log("usuario antiguo"),this.router.navigate(["./app/inicio"],n)):5==t&&(console.log("usuario no existe"),this.presentAlert()))}},{key:"guardarIdUser",value:function(e){var n=this.email,t=this.retornarid(e),o=this.retornarFlag(e);this.apiService.setStorage("idusuario",t),this.apiService.setStorage("ind_user",o),this.apiService.setStorage("correo",n),this.apiService.setStorage("usuario",this.Usuario),this.apiService.setStorage("tipoRegistro","email")}},{key:"retornarFlag",value:function(e){var n;return e.find((function(e){n=e.ind_user})),n}},{key:"retornarid",value:function(e){var n;return e.find((function(e){n=e.idusuario})),n}},{key:"presentLoading",value:function(){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadingController.create({cssClass:"my-custom-class",message:"Iniciando sesi\xf3n"});case 2:return this.loading=e.sent,e.next=5,this.loading.present();case 5:case"end":return e.stop()}}),e,this)})))}},{key:"presentAlert",value:function(){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.alertController.create({cssClass:"my-custom-class",header:"Error",subHeader:"Usuario no existe",message:"Debe crear un nuevo usuario",buttons:["OK"]});case 2:return n=e.sent,e.next=5,n.present();case 5:case"end":return e.stop()}}),e,this)})))}},{key:"presentAlertErrorPass",value:function(){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.alertController.create({cssClass:"my-custom-class",header:"Error",subHeader:"Contrase\xf1a incorrecta",message:"Intente nuevamente",buttons:["OK"]});case 2:return n=e.sent,e.next=5,n.present();case 5:case"end":return e.stop()}}),e,this)})))}},{key:"presentAlert2",value:function(e){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var t;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.alertController.create({cssClass:"my-custom-class",header:"Error",subHeader:"Se ha producido un error",message:e,buttons:["OK"]});case 2:return t=n.sent,n.next=5,t.present();case 5:case"end":return n.stop()}}),n,this)})))}},{key:"errorControl",get:function(){return this.myForm.controls}}])&&n(o.prototype,r),i&&n(o,i),t}(),v.\u0275fac=function(e){return new(e||v)(u.Ib(b.a),u.Ib(s.g),u.Ib(c.ib),u.Ib(a.a),u.Ib(c.mb),u.Ib(g.a),u.Ib(c.lb),u.Ib(c.a),u.Ib(p.a))},v.\u0275cmp=u.Cb({type:v,selectors:[["app-login-email"]],decls:35,vars:5,consts:[["novalidate","",3,"formGroup","ngSubmit"],[1,"conteiner-titulo"],[1,"titulo-login",2,"font-size","30px"],[1,"contenedor"],[1,"label-input"],["lines","none",1,"input-item"],["formControlName","email","type","email",1,"input-text"],[2,"width","100%","margin-bottom","5px"],["class","error ion-padding error-input",4,"ngIf"],["formControlName","password","type","password",1,"input-text"],[1,"info-paragraph",3,"click"],["type","submit","expand","block",1,"btn-iniciar-sesion"],[1,"error","ion-padding","error-input"],[1,"label-error"]],template:function(e,n){1&e&&(u.Jb(0,"ion-header"),u.Mb(1,"ion-content"),u.Mb(2,"form",0),u.Ub("ngSubmit",(function(){return n.onSubmit()})),u.Mb(3,"ion-row"),u.Mb(4,"div",1),u.Mb(5,"ion-label",2),u.uc(6,"Correo electr\xf3nico"),u.Jb(7,"br"),u.Lb(),u.Lb(),u.Lb(),u.Mb(8,"ion-row"),u.Mb(9,"div",3),u.Mb(10,"ion-row"),u.Mb(11,"ion-label",4),u.uc(12,"Correo electr\xf3nico"),u.Lb(),u.Lb(),u.Mb(13,"ion-item",5),u.Jb(14,"ion-input",6),u.Lb(),u.Mb(15,"div",7),u.sc(16,m,3,0,"span",8),u.sc(17,d,3,0,"span",8),u.Lb(),u.Lb(),u.Mb(18,"div",3),u.Mb(19,"ion-row"),u.Mb(20,"ion-label",4),u.uc(21,"Contrase\xf1a"),u.Lb(),u.Lb(),u.Mb(22,"ion-item",5),u.Jb(23,"ion-input",9),u.Lb(),u.Mb(24,"div",7),u.sc(25,f,3,0,"span",8),u.sc(26,h,3,0,"span",8),u.Lb(),u.Lb(),u.Lb(),u.Mb(27,"ion-row"),u.Mb(28,"ion-col"),u.Mb(29,"ion-label",10),u.Ub("click",(function(){return n.irRegistroDatosEmail()})),u.uc(30,"Registrate"),u.Lb(),u.Lb(),u.Lb(),u.Mb(31,"ion-row"),u.Mb(32,"div",3),u.Mb(33,"ion-button",11),u.uc(34,"Iniciar sesi\xf3n"),u.Lb(),u.Lb(),u.Lb(),u.Lb(),u.Lb()),2&e&&(u.yb(2),u.ec("formGroup",n.myForm),u.yb(14),u.ec("ngIf",n.submitted&&(null==n.errorControl.email.errors?null:n.errorControl.email.errors.required)),u.yb(1),u.ec("ngIf",n.submitted&&(null==n.errorControl.email.errors?null:n.errorControl.email.errors.pattern)),u.yb(8),u.ec("ngIf",n.submitted&&(null==n.errorControl.password.errors?null:n.errorControl.password.errors.required)),u.yb(1),u.ec("ngIf",n.submitted&&(null==n.errorControl.password.errors?null:n.errorControl.password.errors.minlength)))},directives:[c.v,c.q,a.o,a.i,a.c,c.Q,c.G,c.B,c.A,c.rb,a.h,a.b,i.k,c.p,c.h],styles:["ion-content[_ngcontent-%COMP%]{--background:#121212}ion-content[_ngcontent-%COMP%]   .conteiner-titulo[_ngcontent-%COMP%]{text-align:center;align-content:center;left:0;right:0;margin-top:40%;width:100%;margin-bottom:20px}ion-content[_ngcontent-%COMP%]   .conteiner-titulo[_ngcontent-%COMP%]   .titulo-login[_ngcontent-%COMP%]{color:#f3f2ed;font-family:SF-UI-Display-Black;font-size:20px;margin-top:20px}ion-content[_ngcontent-%COMP%]   .contenedor[_ngcontent-%COMP%]{align-content:center;width:100%}ion-content[_ngcontent-%COMP%]   .contenedor[_ngcontent-%COMP%]   .label-input[_ngcontent-%COMP%]{color:#515252;margin-left:10%;font-family:SFUIDisplay-Regular;font-style:Regular;font-weight:400;font-size:18px;line-height:19px;color:#f3f2ed}ion-content[_ngcontent-%COMP%]   .contenedor[_ngcontent-%COMP%]   .input-item[_ngcontent-%COMP%]{margin:5px auto;width:86%;height:50px;--background:transparent!important;border:2px solid #108b3c;box-sizing:border-box;border-radius:16px!important;--highlight-color-focused:none}ion-content[_ngcontent-%COMP%]   .contenedor[_ngcontent-%COMP%]   .input-item[_ngcontent-%COMP%]   .input-text[_ngcontent-%COMP%]{color:#8f9090;font-family:SFUIDisplay-Regular;font-style:Regular;color:#f3f2ed;font-weight:400}ion-content[_ngcontent-%COMP%]   .contenedor[_ngcontent-%COMP%]   .btn-iniciar-sesion[_ngcontent-%COMP%]{--background:#108b3c;margin:20px 30px;font-size:18px;letter-spacing:.25px;text-transform:none;height:50px;--border-radius:16px;font-family:SFCompactText-Medium;--color:#fff;color:#fff;--background-activated:#1ab952}ion-content[_ngcontent-%COMP%]   .info-paragraph[_ngcontent-%COMP%]{margin-bottom:var(--page-margin);color:#b8b7b7;text-align:left;margin-left:30px;text-decoration:underline;font-family:SFCompactText-Medium;font-size:14px}ion-content[_ngcontent-%COMP%]   .info-paragraph[_ngcontent-%COMP%]:last-child{margin-bottom:0}ion-content[_ngcontent-%COMP%]   .error-input[_ngcontent-%COMP%]{margin-left:8%}ion-content[_ngcontent-%COMP%]   .error-input[_ngcontent-%COMP%]   .label-error[_ngcontent-%COMP%]{font-family:SFUIDisplay-Regular;font-style:Regular;font-weight:400;font-size:14px;line-height:19px;color:red}"]}),v)}],y=((C=function n(){e(this,n)}).\u0275mod=u.Gb({type:C}),C.\u0275inj=u.Fb({factory:function(e){return new(e||C)},providers:[g.a],imports:[[i.c,a.d,a.m,c.gb,s.i.forChild(M)]]}),C)}}])}();