(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{hAM8:function(o,e,n){"use strict";n.r(e),n.d(e,"RegistroDatosEmailPageModule",(function(){return M}));var t=n("ofXK"),r=n("3Pt+"),i=n("TEn/"),s=n("tyNb"),a=n("mrSG"),l=n("fXoL"),c=n("Q4mC"),b=n("CmMg");function u(o,e){1&o&&(l.Mb(0,"span",14),l.Mb(1,"ion-label",15),l.uc(2,"nombre es requerido."),l.Lb(),l.Lb())}function d(o,e){1&o&&(l.Mb(0,"span",14),l.Mb(1,"ion-label",15),l.uc(2,"Apellido es requerido."),l.Lb(),l.Lb())}function m(o,e){1&o&&(l.Mb(0,"span",14),l.Mb(1,"ion-label",15),l.uc(2,"Email es requerido."),l.Lb(),l.Lb())}function p(o,e){1&o&&(l.Mb(0,"span",14),l.Mb(1,"ion-label",15),l.uc(2,"Ingrese un email v\xe1lido."),l.Lb(),l.Lb())}function g(o,e){1&o&&(l.Mb(0,"span",14),l.Mb(1,"ion-label",15),l.uc(2,"Contrase\xf1a es requerida."),l.Lb(),l.Lb())}function h(o,e){1&o&&(l.Mb(0,"span",14),l.Mb(1,"ion-label",15),l.uc(2,"Minimo 8 caracteres."),l.Lb(),l.Lb())}const f=[{path:"",component:(()=>{class o{constructor(o,e,n,t,r,i,s,a){this.router=o,this.loadingController=e,this.formBuilder=n,this.navCtrl=t,this.platform=r,this.servicioAES=i,this.alertController=s,this.apiServicio=a,this.submitted=!1,this.nuevoUsuario={id:"",nombreCompleto:"",apellidos:"",telefono:"0",email:"",rutaFoto:"",fechaNacimiento:"",genero:"",password:""},this.keyJScrypto="123456$#@$^@1ERF",this.isLoading=!1}ngOnInit(){this.subscription=this.platform.backButton.subscribeWithPriority(9999,()=>{this.dismiss(),this.navCtrl.pop()}),this.myForm=this.formBuilder.group({nombres:["",[r.n.required]],apellidos:["",[r.n.required]],email:["",[r.n.required,r.n.pattern("[a-zA-Z0-9._%+-]+@[a-z0-9.-]+.[a-z]{2,3}$")]],password:["",[r.n.required,r.n.minLength(8)]]})}ionViewDidLeave(){this.subscription.unsubscribe()}get errorControl(){return this.myForm.controls}onSubmit(){return Object(a.a)(this,void 0,void 0,(function*(){if(this.submitted=!0,!this.myForm.valid)return console.log("Llena todos los datos!"),!1;this.nuevoUsuario.nombreCompleto=this.myForm.value.nombres,this.nuevoUsuario.apellidos=this.myForm.value.apellidos,this.nuevoUsuario.email=this.myForm.value.email,this.nuevoUsuario.rutaFoto="https://firebasestorage.googleapis.com/v0/b/bubeapp.appspot.com/o/ImagenesUsuarios%2Favatar_perfil.jpg?alt=media&token=3757e499-3ff4-4f3a-ba3d-911bde3506f7",this.nuevoUsuario.password=this.servicioAES.set(this.keyJScrypto,this.myForm.value.password),this.postVerificarLoginGmail({email:this.nuevoUsuario.email})}))}postVerificarLoginGmail(o){this.apiServicio.postVerificarLoginGmail(o).then(o=>{console.log(o),0==this.retornarFlag(o)?(console.log("usuario no existe"),this.irIngresarCodigo()):this.presentAlert1()}).catch(o=>{console.log(o)})}retornarFlag(o){let e,n=[];return n=o,n.find(o=>{e=o.ind_user}),e}irValidacionCodigoEmail(){this.router.navigate(["codigo-email"])}irIngresarCodigo(){this.loadingRegistrando();let o=this.generaCodigo();this.apiServicio.enviarCorreo({email:this.nuevoUsuario.email,content:"<h4>Hola "+this.nuevoUsuario.nombreCompleto+"</h4><p>Este es el c\xf3digo que necesitas para tu registro en Bube:</p><h3 style='color:#000'>"+o+"</h3><p>Este correo electr\xf3nico se genera autom\xe1ticamente. Por favor, no respondas a \xe9l. Si necesitas ayuda adicional, por favor, visita el Soporte de Bube.</p>",subject:"C\xf3digo de verificaci\xf3n Bube"}).then(e=>{let n={state:{correo:this.nuevoUsuario.email,codigo:o,nuevoUsuario:this.nuevoUsuario}};this.dismiss(),this.router.navigate(["codigo-email"],n)}).catch(o=>{console.log(o)})}AlertError(o){return Object(a.a)(this,void 0,void 0,(function*(){const e=yield this.alertController.create({cssClass:"my-custom-class",message:o,buttons:["OK"]});yield e.present()}))}generaCodigo(){let o="";const e="0123456789".length;for(let n=0;n<4;n++)o+="0123456789".charAt(Math.floor(Math.random()*e));return o}loadingRegistrando(){return Object(a.a)(this,void 0,void 0,(function*(){return this.isLoading=!0,yield this.loadingController.create({cssClass:"my-custom-class",message:"Registrando..."}).then(o=>{o.present().then(()=>{console.log("presented"),this.isLoading||o.dismiss().then(()=>console.log("abort presenting"))})})}))}dismiss(){return Object(a.a)(this,void 0,void 0,(function*(){return this.isLoading=!1,yield this.loadingController.dismiss().then(()=>console.log("dismissed"))}))}presentAlert1(){return Object(a.a)(this,void 0,void 0,(function*(){const o=yield this.alertController.create({header:"Error",cssClass:"my-custom-class",subHeader:"el email ya est\xe1 registrado",message:"Intente con otro email",buttons:["OK"]});yield o.present()}))}}return o.\u0275fac=function(e){return new(e||o)(l.Ib(s.g),l.Ib(i.ib),l.Ib(r.a),l.Ib(i.lb),l.Ib(i.mb),l.Ib(c.a),l.Ib(i.a),l.Ib(b.a))},o.\u0275cmp=l.Cb({type:o,selectors:[["app-registro-datos-email"]],decls:47,vars:7,consts:[[1,"ion-no-border"],["novalidate","",3,"formGroup","ngSubmit"],[1,"conteiner-titulo"],[1,"titulo-login",2,"font-size","30px"],[1,"contenedor"],[1,"label-input"],["lines","none",1,"input-item"],["type","text","formControlName","nombres","name","nombres","id","nombres","maxlength","30",1,"input-text"],[2,"width","100%","margin-bottom","5px"],["class","error ion-padding error-input",4,"ngIf"],["type","text","formControlName","apellidos","name","apellidos","id","apellidos","maxlength","30",1,"input-text"],["type","email","formControlName","email","name","email","id","email","maxlength","60",1,"input-text"],["type","password","formControlName","password","name","password","id","password","maxlength","30",1,"input-text"],["expand","block","type","submit",1,"btn-iniciar-sesion"],[1,"error","ion-padding","error-input"],[1,"label-error"]],template:function(o,e){1&o&&(l.Jb(0,"ion-header",0),l.Mb(1,"ion-content"),l.Mb(2,"form",1),l.Ub("ngSubmit",(function(){return e.onSubmit()})),l.Mb(3,"ion-row"),l.Mb(4,"div",2),l.Mb(5,"ion-label",3),l.uc(6,"Registra tus datos"),l.Jb(7,"br"),l.Lb(),l.Lb(),l.Lb(),l.Mb(8,"ion-row"),l.Mb(9,"div",4),l.Mb(10,"ion-row"),l.Mb(11,"ion-label",5),l.uc(12,"Nombres"),l.Lb(),l.Lb(),l.Mb(13,"ion-item",6),l.Jb(14,"ion-input",7),l.Lb(),l.Mb(15,"div",8),l.sc(16,u,3,0,"span",9),l.Lb(),l.Lb(),l.Mb(17,"div",4),l.Mb(18,"ion-row"),l.Mb(19,"ion-label",5),l.uc(20,"Apellidos"),l.Lb(),l.Lb(),l.Mb(21,"ion-item",6),l.Jb(22,"ion-input",10),l.Lb(),l.Mb(23,"div",8),l.sc(24,d,3,0,"span",9),l.Lb(),l.Lb(),l.Mb(25,"div",4),l.Mb(26,"ion-row"),l.Mb(27,"ion-label",5),l.uc(28,"Email"),l.Lb(),l.Lb(),l.Mb(29,"ion-item",6),l.Jb(30,"ion-input",11),l.Lb(),l.Mb(31,"div",8),l.sc(32,m,3,0,"span",9),l.sc(33,p,3,0,"span",9),l.Lb(),l.Lb(),l.Mb(34,"div",4),l.Mb(35,"ion-row"),l.Mb(36,"ion-label",5),l.uc(37,"Contrase\xf1a"),l.Lb(),l.Lb(),l.Mb(38,"ion-item",6),l.Jb(39,"ion-input",12),l.Lb(),l.Mb(40,"div",8),l.sc(41,g,3,0,"span",9),l.sc(42,h,3,0,"span",9),l.Lb(),l.Lb(),l.Lb(),l.Mb(43,"ion-row"),l.Mb(44,"div",4),l.Mb(45,"ion-button",13),l.uc(46,"Registrar"),l.Lb(),l.Lb(),l.Lb(),l.Lb(),l.Lb()),2&o&&(l.yb(2),l.ec("formGroup",e.myForm),l.yb(14),l.ec("ngIf",e.submitted&&(null==e.errorControl.nombres.errors?null:e.errorControl.nombres.errors.required)),l.yb(8),l.ec("ngIf",e.submitted&&(null==e.errorControl.apellidos.errors?null:e.errorControl.apellidos.errors.required)),l.yb(8),l.ec("ngIf",e.submitted&&(null==e.errorControl.email.errors?null:e.errorControl.email.errors.required)),l.yb(1),l.ec("ngIf",e.submitted&&(null==e.errorControl.email.errors?null:e.errorControl.email.errors.pattern)),l.yb(8),l.ec("ngIf",e.submitted&&(null==e.errorControl.password.errors?null:e.errorControl.password.errors.required)),l.yb(1),l.ec("ngIf",e.submitted&&(null==e.errorControl.password.errors?null:e.errorControl.password.errors.minlength)))},directives:[i.v,i.q,r.o,r.i,r.c,i.Q,i.G,i.B,i.A,i.rb,r.h,r.b,r.e,t.k,i.h],styles:["ion-content[_ngcontent-%COMP%], ion-header[_ngcontent-%COMP%], ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--background:#121212}ion-content[_ngcontent-%COMP%]   .conteiner-titulo[_ngcontent-%COMP%]{text-align:center;align-content:center;left:0;right:0;margin-top:10%;width:100%;margin-bottom:20px}ion-content[_ngcontent-%COMP%]   .conteiner-titulo[_ngcontent-%COMP%]   .titulo-login[_ngcontent-%COMP%]{color:#f3f2ed;font-family:SF-UI-Display-Black;font-size:20px;margin-top:20px}ion-content[_ngcontent-%COMP%]   .contenedor[_ngcontent-%COMP%]{align-content:center;width:100%;margin-top:15px}ion-content[_ngcontent-%COMP%]   .contenedor[_ngcontent-%COMP%]   .label-input[_ngcontent-%COMP%]{color:#515252;margin-left:12%;font-family:SFUIDisplay-Regular;font-style:Regular;font-weight:400;font-size:17px;line-height:19px;color:#f3f2ed}ion-content[_ngcontent-%COMP%]   .contenedor[_ngcontent-%COMP%]   .input-item[_ngcontent-%COMP%]{margin:5px auto;width:80%;height:50px;--background:transparent!important;border:2px solid #108b3c;box-sizing:border-box;border-radius:16px!important;--highlight-color-focused:none}ion-content[_ngcontent-%COMP%]   .contenedor[_ngcontent-%COMP%]   .input-item[_ngcontent-%COMP%]   .input-text[_ngcontent-%COMP%]{color:#8f9090;font-family:SFUIDisplay-Regular;font-style:Regular;color:#f3f2ed;font-weight:400}ion-content[_ngcontent-%COMP%]   .contenedor[_ngcontent-%COMP%]   .btn-iniciar-sesion[_ngcontent-%COMP%]{--background:#108b3c;margin:20px 10%;font-size:18px;letter-spacing:.25px;text-transform:none;height:50px;--border-radius:16px;font-family:SFCompactText-Medium;--color:#fff;color:#fff;--background-activated:#1ab952}ion-content[_ngcontent-%COMP%]   .error-input[_ngcontent-%COMP%]{margin-left:8%}ion-content[_ngcontent-%COMP%]   .error-input[_ngcontent-%COMP%]   .label-error[_ngcontent-%COMP%]{font-weight:400;font-size:14px}.label-input-error[_ngcontent-%COMP%], ion-content[_ngcontent-%COMP%]   .error-input[_ngcontent-%COMP%]   .label-error[_ngcontent-%COMP%]{font-family:SFUIDisplay-Regular;font-style:Regular;line-height:19px;color:red}.label-input-error[_ngcontent-%COMP%]{margin-left:12%;font-size:12px}"]}),o})()}];let M=(()=>{class o{}return o.\u0275mod=l.Gb({type:o}),o.\u0275inj=l.Fb({factory:function(e){return new(e||o)},providers:[c.a],imports:[[t.c,r.d,r.m,i.gb,s.i.forChild(f)]]}),o})()}}]);