(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{"9FqO":function(o,t,e){"use strict";e.r(t),e.d(t,"LoginEligeSesionPageModule",(function(){return p}));var n=e("ofXK"),i=e("3Pt+"),r=e("TEn/"),s=e("tyNb"),a=e("mrSG"),l=e("fXoL"),c=e("UbJi"),g=e("up+p"),b=e("GGTb"),u=e("CmMg");function d(o,t){1&o&&l.Jb(0,"ion-spinner",9)}const h=[{path:"",component:(()=>{class o{constructor(o,t,e,n,i,r,s,a,l){this.router=o,this.afAuth=t,this.googlePlus=e,this.platform=n,this.navCtrl=i,this.facebook=r,this.apiService=s,this.loadingController=a,this.alertController=l,this.Usuario={id:"",nombreCompleto:"",apellidos:"",telefono:"0",email:"",rutaFoto:"",fechaNacimiento:"",genero:"",password:"",idapple:""},this.btnGoogle=!1,this.botonGoogle=!1}ngOnInit(){}ionViewDidEnter(){this.subscription=this.platform.backButton.subscribeWithPriority(9999,()=>{this.navCtrl.pop()})}ionViewDidLeave(){this.subscription.unsubscribe()}irInicioCorreo(){this.router.navigate(["login-email"])}irInicioTelefono(){this.router.navigate(["login-telefono"])}cargarLoginGoogle(){this.botonGoogle=!0,this.eventoLogin()}eventoLogin(){this.apiService.getStorage("gmail_activo").then(o=>{null!=o&&1==o?this.googlePlus.logout().then(o=>{this.apiService.setStorage("gmail_activo",0),this.loginGooglePlus()}).catch(o=>{console.log(o),this.apiService.setStorage("gmail_activo",0),this.loginGooglePlus()}):this.loginGooglePlus()}).catch(o=>{console.log(o),this.loginGooglePlus()})}loginGooglePlus(){this.googlePlus.login({}).then(o=>{this.apiService.setStorage("gmail_activo",1),this.Usuario.nombreCompleto=null==o.givenName?"":o.givenName,this.Usuario.apellidos=null==o.familyName?"":o.familyName,this.Usuario.email=null==o.email?"":o.email,this.Usuario.rutaFoto=null==o.imageUrl?"https://firebasestorage.googleapis.com/v0/b/bubeapp.appspot.com/o/ImagenesUsuarios%2Favatar_perfil.jpg?alt=media&token=3757e499-3ff4-4f3a-ba3d-911bde3506f7":o.imageUrl;let t={email:this.Usuario.email};""==this.Usuario.email?this.botonGoogle=!1:this.postVerificarLoginGmail(t)}).catch(o=>{console.log(o),this.botonGoogle=!1,this.presentAlert2()})}logout(){this.afAuth.signOut()}postVerificarLoginGmail(o){this.apiService.postVerificarLoginGmail(o).then(o=>{this.botonGoogle=!1,this.logearse(o,"email")}).catch(o=>{console.log(o),this.botonGoogle=!1,this.presentAlert1()})}logearse(o,t){var e=this.retornarFlag(o);console.log("ind logearse "+e);let n={state:{nuevoUsuario:this.Usuario,tipoRegistro:t}};0==e?(console.log("usuario no existe"),this.router.navigate(["validacion-fecha-nacimiento"],n)):(this.guardarIdUser(o,t),3==e?(console.log("usuario nuevo"),this.router.navigate(["./validacionInicio",1],n)):4==e?(console.log("usuario nuevo"),this.router.navigate(["./validacionCorreo"],n)):2==e&&(console.log("usuario antiguo"),this.router.navigate(["./app/inicio"],n)))}guardarIdUser(o,t){let e=this.Usuario.email,n=this.retornarid(o),i=this.retornarFlag(o);this.apiService.setStorage("idusuario",n),this.apiService.setStorage("ind_user",i),this.apiService.setStorage("correo",e),this.apiService.setStorage("usuario",this.Usuario),this.apiService.setStorage("tipoRegistro",t)}retornarFlag(o){let t,e=[];return e=o,e.find(o=>{t=o.ind_user}),t}retornarid(o){let t,e=[];return e=o,e.find(o=>{t=o.idusuario}),t}presentLoading(){return Object(a.a)(this,void 0,void 0,(function*(){this.loading=yield this.loadingController.create({cssClass:"my-custom-class",message:"Iniciando sesi\xf3n"}),yield this.loading.present()}))}presentLoading2(){return Object(a.a)(this,void 0,void 0,(function*(){this.loading=yield this.loadingController.create({cssClass:"my-custom-class",message:"Verificando..."}),yield this.loading.present()}))}presentAlert1(){return Object(a.a)(this,void 0,void 0,(function*(){const o=yield this.alertController.create({header:"Error",cssClass:"my-custom-class",subHeader:"Error al obtener datos",message:"Intente m\xe1s tarde",buttons:["OK"]});yield o.present()}))}presentAlert2(){return Object(a.a)(this,void 0,void 0,(function*(){const o=yield this.alertController.create({header:"Alerta",cssClass:"my-custom-class",subHeader:"Acci\xf3n cancelada",buttons:["OK"]});yield o.present()}))}logoutFacebook(){this.facebook.logout()}}return o.\u0275fac=function(t){return new(t||o)(l.Ib(s.g),l.Ib(c.a),l.Ib(g.a),l.Ib(r.mb),l.Ib(r.lb),l.Ib(b.a),l.Ib(u.a),l.Ib(r.ib),l.Ib(r.a))},o.\u0275cmp=l.Cb({type:o,selectors:[["app-login-elige-sesion"]],decls:22,vars:4,consts:[[1,"conteiner-titulo"],[1,"titulo-login",2,"font-size","30px"],[1,"titulo-login"],[1,"contenedor"],["expand","block",1,"btn-inicio-sesion",3,"disabled","click"],["expand","block",1,"btn-inicio-google",3,"disabled","click"],["slot","start","name","logo-google"],[1,"text-google"],["name","crescent",4,"ngIf"],["name","crescent"]],template:function(o,t){1&o&&(l.Jb(0,"ion-header"),l.Mb(1,"ion-content"),l.Mb(2,"ion-row"),l.Mb(3,"div",0),l.Mb(4,"ion-label",1),l.uc(5,"Elige"),l.Jb(6,"br"),l.Lb(),l.Mb(7,"ion-label",2),l.uc(8,"tu inicio de sesi\xf3n"),l.Lb(),l.Lb(),l.Lb(),l.Mb(9,"ion-row"),l.Mb(10,"div",3),l.Mb(11,"ion-button",4),l.Ub("click",(function(){return t.irInicioTelefono()})),l.uc(12,"Iniciar sesi\xf3n con n\xfamero de tel\xe9fono"),l.Lb(),l.Lb(),l.Mb(13,"div",3),l.Mb(14,"ion-button",4),l.Ub("click",(function(){return t.irInicioCorreo()})),l.uc(15,"Iniciar sesi\xf3n con correo electr\xf3nico"),l.Lb(),l.Lb(),l.Mb(16,"div",3),l.Mb(17,"ion-button",5),l.Ub("click",(function(){return t.cargarLoginGoogle()})),l.Jb(18,"ion-icon",6),l.Mb(19,"ion-label",7),l.uc(20," Iniciar sesi\xf3n con Google "),l.Lb(),l.sc(21,d,1,0,"ion-spinner",8),l.Lb(),l.Lb(),l.Lb(),l.Lb()),2&o&&(l.yb(11),l.ec("disabled",t.botonGoogle),l.yb(3),l.ec("disabled",t.botonGoogle),l.yb(3),l.ec("disabled",t.botonGoogle),l.yb(4),l.ec("ngIf",t.botonGoogle))},directives:[r.v,r.q,r.Q,r.G,r.h,r.w,n.k,r.Z],styles:["ion-content[_ngcontent-%COMP%]{--background:#121212}ion-content[_ngcontent-%COMP%]   .conteiner-titulo[_ngcontent-%COMP%]{text-align:center;align-content:center;left:0;right:0;margin-top:40%;width:100%;margin-bottom:20px}ion-content[_ngcontent-%COMP%]   .conteiner-titulo[_ngcontent-%COMP%]   .titulo-login[_ngcontent-%COMP%]{color:#f3f2ed;font-family:SF-UI-Display-Black;font-size:20px;margin-top:20px}ion-content[_ngcontent-%COMP%]   .contenedor[_ngcontent-%COMP%]{align-content:center;text-align:center;width:100%}ion-content[_ngcontent-%COMP%]   .contenedor[_ngcontent-%COMP%]   .btn-inicio-sesion[_ngcontent-%COMP%]{--background:#121212;font-size:16px;--border-color:#108b3c;font-family:SFUIDisplay-Regular;--background-activated:#383838}ion-content[_ngcontent-%COMP%]   .contenedor[_ngcontent-%COMP%]   .btn-inicio-google[_ngcontent-%COMP%], ion-content[_ngcontent-%COMP%]   .contenedor[_ngcontent-%COMP%]   .btn-inicio-sesion[_ngcontent-%COMP%]{margin-left:30px;margin-right:30px;margin-bottom:20px;height:50px;text-transform:none;--border-style:solid;--border-width:2px;--border-radius:16px}ion-content[_ngcontent-%COMP%]   .contenedor[_ngcontent-%COMP%]   .btn-inicio-google[_ngcontent-%COMP%]{--background:#d54c3e;--border-color:#d54c3e;--background-activated:#383838}ion-content[_ngcontent-%COMP%]   .contenedor[_ngcontent-%COMP%]   .btn-inicio-google[_ngcontent-%COMP%]   .text-google[_ngcontent-%COMP%]{font-family:SFUIDisplay-Regular;color:#f3f2ed;font-size:16px}ion-content[_ngcontent-%COMP%]   .contenedor[_ngcontent-%COMP%]   .btn-inicio-apple[_ngcontent-%COMP%]{--background:#fff;margin-left:30px;margin-right:30px;margin-bottom:20px;height:50px;text-transform:none;--border-color:#fff;--border-style:solid;--border-width:2px;--border-radius:16px;--background-activated:#383838}ion-content[_ngcontent-%COMP%]   .contenedor[_ngcontent-%COMP%]   .btn-inicio-apple[_ngcontent-%COMP%]   .text-google[_ngcontent-%COMP%]{font-family:SFUIDisplay-Regular;color:#000;font-size:16px}"]}),o})()}];let p=(()=>{class o{}return o.\u0275mod=l.Gb({type:o}),o.\u0275inj=l.Fb({factory:function(t){return new(t||o)},imports:[[n.c,i.d,r.gb,s.i.forChild(h)]]}),o})()}}]);