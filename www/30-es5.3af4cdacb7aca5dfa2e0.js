!function(){function t(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function n(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{yaHk:function(e,i,o){"use strict";o.r(i),o.d(i,"CodigoSmsPageModule",(function(){return x}));var r,s,a=o("ofXK"),c=o("3Pt+"),u=o("TEn/"),d=o("tyNb"),l=o("mrSG"),g=o("fXoL"),h=o("CmMg"),b=o("8BtL"),p=["input1"],f=["input2"],m=["input3"],v=["input4"],M=["input5"],C=["input6"],y=[{path:"",component:(r=function(){function e(n,i,o,r,s,a,c,u,d){var l=this;t(this,e),this.router=n,this.apiservicio=i,this.firebaseAuthentication=o,this.alertControler=r,this.route=s,this.toastController=a,this.platform=c,this.navCtrl=u,this.loadingController=d,this.usuario="",this.n=30,this.desctividarContador=!0,this.route.queryParams.subscribe((function(t){l.router.getCurrentNavigation().extras.state&&(l.usuario=l.router.getCurrentNavigation().extras.state.usuario,l.codigo=l.router.getCurrentNavigation().extras.state.codigo)}))}var i,o,r;return i=e,(o=[{key:"ngOnInit",value:function(){var t=this,n=this;window.setInterval((function(){0==n.contador?n.desctividarContador=!1:(n.contador=n.n,n.n--)}),1e3),this.subscription=this.platform.backButton.subscribeWithPriority(9999,(function(){null==t.loading&&null==t.loading||t.loading.dismiss(),t.navCtrl.pop()}))}},{key:"verificarCodigo",value:function(){var t=this;this.presentLoading(),this.codigoSms=String(this.code1)+String(this.code2)+String(this.code3)+String(this.code4)+String(this.code5)+String(this.code6),6==this.codigoSms.length&&this.firebaseAuthentication.signInWithVerificationId(this.codigo,this.codigoSms).then((function(n){console.log(n),t.loading.dismiss(),t.irValidacionFechaNacimieto()})).catch((function(n){console.log(n),t.loading.dismiss(),console.log("error"),t.presentAlert()}))}},{key:"irValidacionFechaNacimieto",value:function(){this.router.navigate(["validacion-fecha-nacimiento"],{state:{nuevoUsuario:this.usuario,tipoRegistro:"tel"}})}},{key:"presentAlert",value:function(){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.alertControler.create({cssClass:"my-custom-class",header:"C\xf3digo incorrecto",subHeader:"El c\xf3digo ingresado es incorrecto.",message:"Si no le lleg\xf3 el SMS con el c\xf3digo puede reenviarlo.",buttons:["OK"]});case 2:return n=t.sent,t.next=5,n.present();case 5:case"end":return t.stop()}}),t,this)})))}},{key:"reenviarCodigo",value:function(){this.presentLoading1(),this.enviarMensaje()}},{key:"enviarMensaje",value:function(){var t=this;this.borrarCodigos(),this.firebaseAuthentication.verifyPhoneNumber("+51"+this.usuario.telefono.toString(),3e4).then((function(n){t.loading.dismiss(),t.presentToastOK(),t.n=30,t.contador=30,t.desctividarContador=!0,t.codigo=n})).catch((function(n){console.log(n),t.loading.dismiss(),t.presentToastERROR()}))}},{key:"presentToastOK",value:function(){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.toastController.create({message:"Mensaje de texto enviado.",duration:2e3,color:"success"});case 2:t.sent.present();case 3:case"end":return t.stop()}}),t,this)})))}},{key:"presentToastERROR",value:function(){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.toastController.create({message:"Mensaje de texto no se pudo enviar.",duration:2e3,color:"danger"});case 2:t.sent.present();case 3:case"end":return t.stop()}}),t,this)})))}},{key:"presentLoading",value:function(){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.loadingController.create({cssClass:"my-custom-class custom-loading",message:"Verificando...",translucent:!0,animated:!0});case 2:return this.loading=t.sent,t.next=5,this.loading.present();case 5:case"end":return t.stop()}}),t,this)})))}},{key:"presentLoading1",value:function(){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.loadingController.create({cssClass:"my-custom-class custom-loading",message:"Enviando...",translucent:!0,animated:!0});case 2:return this.loading=t.sent,t.next=5,this.loading.present();case 5:case"end":return t.stop()}}),t,this)})))}},{key:"focusInput1",value:function(){var t=this;String(this.code1).length>0?1==String(this.code1).length?this.focusInput2():setTimeout((function(){t.input1.setFocus()}),100):this.input1.setFocus()}},{key:"focusInput2",value:function(){var t=this;String(this.code1).length>0?1==String(this.code2).length?this.focusInput3():setTimeout((function(){t.input2.setFocus()}),100):this.input1.setFocus()}},{key:"focusInput3",value:function(){var t=this;String(this.code1).length>0?1==String(this.code3).length?this.focusInput4():setTimeout((function(){t.input3.setFocus()}),100):this.input1.setFocus()}},{key:"focusInput4",value:function(){var t=this;String(this.code1).length>0?1==String(this.code4).length?this.focusInput5():setTimeout((function(){t.input4.setFocus()}),100):this.input1.setFocus()}},{key:"focusInput5",value:function(){var t=this;String(this.code1).length>0?1==String(this.code5).length?this.focusInput6():setTimeout((function(){t.input5.setFocus()}),100):this.input1.setFocus()}},{key:"focusInput6",value:function(){var t=this;String(this.code1).length>0?1==String(this.code6).length?this.verificarCodigo():setTimeout((function(){t.input6.setFocus()}),100):this.input1.setFocus()}},{key:"borrarCodigos",value:function(){this.code6="",this.code5="",this.code4="",this.code3="",this.code2="",this.code1=""}}])&&n(i.prototype,o),r&&n(i,r),e}(),r.\u0275fac=function(t){return new(t||r)(g.Ib(d.g),g.Ib(h.a),g.Ib(b.a),g.Ib(u.a),g.Ib(d.a),g.Ib(u.sb),g.Ib(u.mb),g.Ib(u.lb),g.Ib(u.ib))},r.\u0275cmp=g.Cb({type:r,selectors:[["app-codigo-sms"]],viewQuery:function(t,n){var e;1&t&&(g.zc(p,!0),g.zc(f,!0),g.zc(m,!0),g.zc(v,!0),g.zc(M,!0),g.zc(C,!0)),2&t&&(g.jc(e=g.Vb())&&(n.input1=e.first),g.jc(e=g.Vb())&&(n.input2=e.first),g.jc(e=g.Vb())&&(n.input3=e.first),g.jc(e=g.Vb())&&(n.input4=e.first),g.jc(e=g.Vb())&&(n.input5=e.first),g.jc(e=g.Vb())&&(n.input6=e.first))},decls:42,vars:10,consts:[[1,"ion-no-border"],["slot","start"],["color","success"],["src","./assets/Iconos/LogoBube_final.png",1,"img-login"],[2,"width","100%","text-align","center","padding-top","15%"],[1,"label-page"],[2,"width","100%","text-align","center"],["lines","none",1,"input-login"],["type","tel","inputmode","numeric","pattern","[0-9]","maxlength","1",1,"input-text",3,"ngModel","ngModelChange","ionChange"],["input1",""],["input2",""],["input3",""],["input4",""],["input5",""],["input6",""],[2,"width","90%","text-align","right","padding-top","3%"],[1,"button-back-letter",3,"click"],["slot","icon-only","name","backspace-outline"],[2,"width","100%","text-align","center","padding-top","3%"],[1,"label-page2"],[2,"color","#b8b7b7","text-decoration","underline",3,"hidden","click"],[3,"hidden"]],template:function(t,n){1&t&&(g.Mb(0,"ion-header",0),g.Mb(1,"ion-toolbar"),g.Mb(2,"ion-buttons",1),g.Jb(3,"ion-menu-button"),g.Jb(4,"ion-back-button",2),g.Lb(),g.Lb(),g.Lb(),g.Mb(5,"ion-content"),g.Mb(6,"ion-row"),g.Jb(7,"ion-img",3),g.Lb(),g.Mb(8,"ion-row"),g.Mb(9,"div",4),g.Mb(10,"ion-label"),g.Mb(11,"h2",5),g.Mb(12,"b"),g.uc(13),g.Lb(),g.Lb(),g.Lb(),g.Lb(),g.Lb(),g.Mb(14,"ion-row"),g.Mb(15,"div",6),g.Mb(16,"ion-item",7),g.Mb(17,"ion-input",8,9),g.Ub("ngModelChange",(function(t){return n.code1=t}))("ionChange",(function(){return n.focusInput1()})),g.Lb(),g.Mb(19,"ion-input",8,10),g.Ub("ngModelChange",(function(t){return n.code2=t}))("ionChange",(function(){return n.focusInput2()})),g.Lb(),g.Mb(21,"ion-input",8,11),g.Ub("ngModelChange",(function(t){return n.code3=t}))("ionChange",(function(){return n.focusInput3()})),g.Lb(),g.Mb(23,"ion-input",8,12),g.Ub("ngModelChange",(function(t){return n.code4=t}))("ionChange",(function(){return n.focusInput4()})),g.Lb(),g.Mb(25,"ion-input",8,13),g.Ub("ngModelChange",(function(t){return n.code5=t}))("ionChange",(function(){return n.focusInput5()})),g.Lb(),g.Mb(27,"ion-input",8,14),g.Ub("ngModelChange",(function(t){return n.code6=t}))("ionChange",(function(){return n.focusInput6()})),g.Lb(),g.Lb(),g.Lb(),g.Lb(),g.Mb(29,"ion-row"),g.Mb(30,"div",15),g.Mb(31,"ion-button",16),g.Ub("click",(function(){return n.borrarCodigos()})),g.Jb(32,"ion-icon",17),g.Lb(),g.Lb(),g.Lb(),g.Mb(33,"ion-row"),g.Mb(34,"div",18),g.Mb(35,"ion-label"),g.Mb(36,"h3",19),g.uc(37,"Te hemos enviado un c\xf3digo de seguridad. Si no encuentras el mensaje de texto haz clic en "),g.Mb(38,"ion-label",20),g.Ub("click",(function(){return n.reenviarCodigo()})),g.uc(39,"volver a enviar"),g.Lb(),g.Mb(40,"ion-label",21),g.uc(41),g.Lb(),g.Lb(),g.Lb(),g.Lb(),g.Lb(),g.Lb()),2&t&&(g.yb(13),g.wc("Ingresa el c\xf3digo que te hemos enviado a tu celular ",n.usuario.telefono,""),g.yb(4),g.ec("ngModel",n.code1),g.yb(2),g.ec("ngModel",n.code2),g.yb(2),g.ec("ngModel",n.code3),g.yb(2),g.ec("ngModel",n.code4),g.yb(2),g.ec("ngModel",n.code5),g.yb(2),g.ec("ngModel",n.code6),g.yb(11),g.ec("hidden",n.desctividarContador),g.yb(2),g.ec("hidden",!n.desctividarContador),g.yb(1),g.wc("Volver a enviar en: ",n.contador,""))},directives:[u.v,u.fb,u.i,u.I,u.e,u.f,u.q,u.Q,u.x,u.G,u.B,u.A,u.rb,c.l,c.e,c.h,c.k,u.h,u.w],styles:["ion-content[_ngcontent-%COMP%], ion-header[_ngcontent-%COMP%], ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--background:#121212}ion-content[_ngcontent-%COMP%]   .label-page[_ngcontent-%COMP%]{color:#fff;padding-left:10%;padding-right:10%;font-family:SFUIDisplay-Regular;font-style:normal;font-weight:500;font-size:18px;line-height:21px}ion-content[_ngcontent-%COMP%]   .btn-iniciar-sesion[_ngcontent-%COMP%]{--background:#108b3c;margin:20px 30px;font-size:18px;letter-spacing:.25px;text-transform:none;height:50px;--border-radius:16px;font-family:SFCompactText-Medium;--color:#fff;color:#fff;--background-activated:#1ab952}.custom-loading[_ngcontent-%COMP%]{--spinner-color:#108b3c!important}.img-login[_ngcontent-%COMP%]{margin:15% auto auto;width:120px;height:120px}.input-login[_ngcontent-%COMP%]{margin:10px auto 5px;width:86%;height:50px;--background:transparent!important;box-sizing:border-box;border-radius:8px!important;--highlight-color-focused:none}.input-login[_ngcontent-%COMP%]   .input-text[_ngcontent-%COMP%]{color:#fff;font-family:SFUIDisplay-Regular;font-style:Regular;font-size:18px;font-weight:700;margin-left:10px;margin-right:10px;text-align:center;border-bottom:1px solid #108b3c}.button-back-letter[_ngcontent-%COMP%]{--background:transparent!important;--background-activated:transparent!important;--box-shadow:none}.label-page2[_ngcontent-%COMP%]{color:#fff;padding-left:10%;padding-right:10%;font-family:SFUIDisplay-Regular;font-style:normal;font-weight:500;font-size:16px;line-height:19px}"]}),r)}],x=((s=function n(){t(this,n)}).\u0275mod=g.Gb({type:s}),s.\u0275inj=g.Fb({factory:function(t){return new(t||s)},imports:[[a.c,c.d,u.gb,d.i.forChild(y)]]}),s)}}])}();